{"version":3,"file":"tag.js","sources":["../../src/tag/tag.tsx"],"sourcesContent":["import { defineComponent, h } from 'vue';\nimport { CloseIcon } from 'tdesign-icons-vue-next';\nimport CLASSNAMES from '../utils/classnames';\nimport config from '../config';\nimport props from './props';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport { ClassName, TNodeReturnValue } from '../common';\nimport { emitEvent } from '../utils/event';\n\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { TagConfig } from '../config-provider/config-receiver';\n\nconst { prefix } = config;\nconst name = `${prefix}-tag`;\n\nexport default defineComponent({\n  ...mixins(getConfigReceiverMixins<TagConfig>('tag')),\n  name: 'TTag',\n  props: { ...props },\n  emits: ['close', 'click'],\n  computed: {\n    tagClass(): ClassName {\n      return [\n        `${name}`,\n        `${name}--${this.theme}`,\n        CLASSNAMES.SIZE[this.size],\n        `${name}--${this.variant}`,\n        this.shape !== 'square' && `${name}--${this.shape}`,\n        {\n          [`${name}--ellipsis`]: this.maxWidth,\n          [`${name}--close`]: this.closable,\n          [`${name}--disabled`]: this.disabled,\n        },\n      ];\n    },\n    tagStyle(): Record<string, string> {\n      if (this.maxWidth) return { maxWidth: `${this.maxWidth}px` };\n      return {};\n    },\n  },\n  methods: {\n    handleClose({ e }: { e: MouseEvent }): void {\n      emitEvent(this, 'close', { e });\n    },\n    handleClick(e: MouseEvent): void {\n      emitEvent(this, 'click', { e });\n    },\n    getCloseIcon() {\n      if (!this.closable) return null;\n      const iconClassName = `${prefix}-tag__icon-close`;\n      // console.log(this.global.closeIcon);\n\n      if (this.global.closeIcon) {\n        const component = this.global.closeIcon();\n        return h(component, {\n          class: iconClassName,\n        });\n      }\n      return <CloseIcon onClick={this.handleClose} class={iconClassName} />;\n    },\n  },\n  render() {\n    // 关闭按钮 自定义组件使用 nativeOnClick 绑定事件\n    const closeIcon = this.getCloseIcon();\n    // 标签内容\n    const tagContent: TNodeReturnValue = renderContent(this, 'default', 'content');\n    // 图标\n    const icon = renderTNodeJSX(this, 'icon');\n\n    return (\n      <span class={this.tagClass} style={this.tagStyle} onClick={this.handleClick}>\n        {icon}\n        {this.maxWidth ? (\n          <span style={this.tagStyle} class={`${name}--text`}>\n            {tagContent}\n          </span>\n        ) : (\n          tagContent\n        )}\n        {closeIcon}\n      </span>\n    );\n  },\n});\n"],"names":["prefix","config","name","defineComponent","mixins","getConfigReceiverMixins","props","emits","computed","tagClass","theme","CLASSNAMES","SIZE","size","variant","shape","maxWidth","closable","disabled","tagStyle","methods","handleClose","e","emitEvent","handleClick","getCloseIcon","iconClassName","global","closeIcon","component","h","render","tagContent","renderContent","icon","renderTNodeJSX"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,IAAQA,MAAR,GAAmBC,MAAnB,CAAQD,MAAR;AACA,IAAME,IAAI,aAAMF,MAAN,SAAV;AACA,WAAeG,eAAe,iCACzBC,MAAM,CAACC,uBAAuB,CAAC,KAAD,CAAxB,CADmB;AAE5BH,EAAAA,IAAI,EAAE,MAFsB;AAG5BI,EAAAA,KAAK,oBAAOA,KAAP,CAHuB;AAI5BC,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,OAAV,CAJqB;AAK5BC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QADQ,sBACG;AAAA;;AACT,aAAO,WACFP,IADE,aAEFA,IAFE,eAEO,KAAKQ,KAFZ,GAGLC,UAAU,CAACC,IAAX,CAAgB,KAAKC,IAArB,CAHK,YAIFX,IAJE,eAIO,KAAKY,OAJZ,GAKL,KAAKC,KAAL,KAAe,QAAf,cAA8Bb,IAA9B,eAAuC,KAAKa,KAA5C,CALK,8CAOCb,IAPD,iBAOoB,KAAKc,QAPzB,mCAQCd,IARD,cAQiB,KAAKe,QARtB,mCASCf,IATD,iBASoB,KAAKgB,QATzB,SAAP;AAYD,KAdO;AAeRC,IAAAA,QAfQ,sBAeG;AACT,UAAI,KAAKH,QAAT,EACE,OAAO;AAAEA,QAAAA,QAAQ,YAAK,KAAKA,QAAV;AAAV,OAAP;AACF,aAAO,EAAP;AACD;AAnBO,GALkB;AA0B5BI,EAAAA,OAAO,EAAE;AACPC,IAAAA,WADO,8BACY;AAAA,UAALC,CAAK,SAALA,CAAK;AACjBC,MAAAA,SAAS,CAAC,IAAD,EAAO,OAAP,EAAgB;AAAED,QAAAA,CAAC,EAADA;AAAF,OAAhB,CAAT;AACD,KAHM;AAIPE,IAAAA,WAJO,uBAIKF,CAJL,EAIQ;AACbC,MAAAA,SAAS,CAAC,IAAD,EAAO,OAAP,EAAgB;AAAED,QAAAA,CAAC,EAADA;AAAF,OAAhB,CAAT;AACD,KANM;AAOPG,IAAAA,YAPO,0BAOQ;AACb,UAAI,CAAC,KAAKR,QAAV,EACE,OAAO,IAAP;AACF,UAAMS,aAAa,aAAM1B,MAAN,qBAAnB;;AACA,UAAI,KAAK2B,MAAL,CAAYC,SAAhB,EAA2B;AACzB,YAAMC,SAAS,GAAG,KAAKF,MAAL,CAAYC,SAAZ,EAAlB;AACA,eAAOE,CAAC,CAACD,SAAD,EAAY;AAClB,mBAAOH;AADW,SAAZ,CAAR;AAGD;;AACD;AAAA,mBAA2B,KAAKL,WAAhC;AAAA,iBAAoDK;AAApD;AACD;AAlBM,GA1BmB;AA8C5BK,EAAAA,MA9C4B,oBA8CnB;AACP,QAAMH,SAAS,GAAG,KAAKH,YAAL,EAAlB;AACA,QAAMO,UAAU,GAAGC,aAAa,CAAC,IAAD,EAAO,SAAP,EAAkB,SAAlB,CAAhC;AACA,QAAMC,IAAI,GAAGC,cAAc,CAAC,IAAD,EAAO,MAAP,CAA3B;AACA;AAAA,eAAoB,KAAK1B,QAAzB;AAAA,eAA0C,KAAKU,QAA/C;AAAA,iBAAkE,KAAKK;AAAvE,QACGU,IADH,EAEG,KAAKlB,QAAL;AAAA,eAA6B,KAAKG,QAAlC;AAAA,yBAAsDjB,IAAtD;AAAA,QAAqE8B,UAArE,KAA0FA,UAF7F,EAGGJ,SAHH;AAKD;AAvD2B,GAA9B;;;;"}
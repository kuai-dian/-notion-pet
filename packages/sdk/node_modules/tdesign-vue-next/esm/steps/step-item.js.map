{"version":3,"file":"step-item.js","sources":["../../src/steps/step-item.tsx"],"sourcesContent":["import { defineComponent, h } from 'vue';\nimport isFunction from 'lodash/isFunction';\nimport { CheckIcon, CloseIcon } from 'tdesign-icons-vue-next';\nimport { prefix } from '../config';\nimport props from './step-item-props';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport { ClassName, SlotReturnValue } from '../common';\n\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { StepsConfig } from '../config-provider/config-receiver';\n\nconst name = `${prefix}-steps-item`;\n\nexport default defineComponent({\n  ...mixins(getConfigReceiverMixins<StepsConfig>('steps')),\n  name: 'TStepItem',\n  components: {\n    CheckIcon,\n    CloseIcon,\n  },\n  inject: {\n    steps: { default: undefined },\n  },\n  props: {\n    ...props,\n  },\n  data() {\n    return {\n      index: -1,\n    };\n  },\n  computed: {\n    current(): string | number {\n      return this.steps && this.steps.current;\n    },\n    baseClass(): ClassName {\n      return [name, { [`${name}--${this.status}`]: this.status }];\n    },\n    iconClass(): ClassName {\n      return [`${name}__icon`, { [`${name}--${this.status}`]: this.status }];\n    },\n    canClick(): boolean {\n      return this.status !== 'process' && !this.steps?.readonly;\n    },\n  },\n  mounted() {\n    this.steps.addItem(this);\n  },\n  unmounted() {\n    this.steps.removeItem(this);\n  },\n  methods: {\n    renderIcon() {\n      let defaultIcon;\n      if (this.steps.theme === 'default') {\n        let icon: SlotReturnValue = '';\n        switch (this.status) {\n          case 'finish':\n            icon = <check-icon />;\n            break;\n          case 'error':\n            if (isFunction(this.global.errorIcon)) {\n              icon = this.global.errorIcon(h);\n            } else {\n              icon = <close-icon />;\n            }\n            break;\n          default:\n            icon = String(this.index + 1);\n            break;\n        }\n        defaultIcon = <span class={`${name}__icon--number`}>{icon}</span>;\n      }\n      return renderTNodeJSX(this, 'icon', defaultIcon);\n    },\n    onStepClick(e: MouseEvent) {\n      const val = this.value === undefined ? this.index : this.value;\n      this.steps.handleChange(val, this.current, e);\n    },\n  },\n  render() {\n    const content = renderContent(this, 'default', 'content');\n    return (\n      <div class={this.baseClass}>\n        <div class={`${name}__inner ${this.canClick ? `${name}--clickable` : ''}`} onClick={this.onStepClick}>\n          <div class={this.iconClass}>{this.renderIcon()}</div>\n          <div class={`${name}__content`}>\n            <div class={`${name}__title`}>{renderTNodeJSX(this, 'title')}</div>\n            <div class={`${name}__description`}>{content}</div>\n            <div class={`${name}__extra`}>{renderTNodeJSX(this, 'extra')}</div>\n          </div>\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","mixins","getConfigReceiverMixins","components","CheckIcon","CloseIcon","inject","steps","props","data","index","computed","current","baseClass","status","iconClass","canClick","readonly","mounted","addItem","unmounted","removeItem","methods","renderIcon","defaultIcon","theme","icon","isFunction","global","errorIcon","h","String","renderTNodeJSX","onStepClick","e","val","value","handleChange","render","content","renderContent"],"mappings":"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"}
{"version":3,"file":"tabs.js","sources":["../../src/tabs/tabs.tsx"],"sourcesContent":["import { ComponentPublicInstance, defineComponent, VNode } from 'vue';\nimport { prefix } from '../config';\nimport TTabPanel from './tab-panel';\nimport TTabNav from './tab-nav';\nimport { TabValue, TdTabsProps } from './type';\nimport props from './props';\nimport { emitEvent } from '../utils/event';\nimport { renderTNodeJSX } from '../utils/render-tnode';\n\nconst name = `${prefix}-tabs`;\n\nexport default defineComponent({\n  name,\n\n  components: {\n    TTabPanel,\n    TTabNav,\n  },\n\n  props: {\n    ...props,\n  },\n\n  emits: ['change', 'add', 'remove', 'update:value'],\n  data() {\n    return {\n      panels: [] as Array<InstanceType<typeof TTabPanel>>,\n      listPanels: [],\n    };\n  },\n\n  methods: {\n    onAddTab(e: MouseEvent) {\n      emitEvent<Parameters<TdTabsProps['onAdd']>>(this, 'add', { e });\n    },\n    onChangeTab(value: TabValue) {\n      emitEvent<Parameters<TdTabsProps['onChange']>>(this, 'change', value);\n    },\n    onRemoveTab({ e, value, index }: Parameters<TdTabsProps['onRemove']>[0]) {\n      const eventData = {\n        value,\n        index,\n        e,\n      };\n      emitEvent<Parameters<TdTabsProps['onRemove']>>(this, 'remove', eventData);\n    },\n    getSlotPanels() {\n      let content = renderTNodeJSX(this, 'default');\n      if (!content) return [];\n      content = content\n        .map((item: ComponentPublicInstance) => {\n          if (item.children && Array.isArray(item.children)) return item.children;\n          return item;\n        })\n        .flat()\n        .filter((item: ComponentPublicInstance) => {\n          return item.type.name === 'TTabPanel';\n        });\n\n      return content;\n    },\n    renderHeader() {\n      const panels = (this.list?.length ? this.list : this.getSlotPanels()) || [];\n      const panelsData = panels.map((item: ComponentPublicInstance) => {\n        const selfItem = item;\n\n        if (item.props) {\n          Object.keys(item.props).forEach((key) => {\n            selfItem[key] = item.props[key];\n          });\n        }\n\n        return selfItem;\n      });\n      const tabNavProps = {\n        theme: this.theme,\n        value: this.value,\n        size: this.size,\n        disabled: this.disabled,\n        placement: this.placement,\n        addable: this.addable,\n        panels: panelsData,\n      };\n      return (\n        <div\n          class={{\n            [`${prefix}-tabs__header`]: true,\n            [`${prefix}-is-${this.placement}`]: true,\n          }}\n        >\n          <TTabNav {...tabNavProps} onChange={this.onChangeTab} onAdd={this.onAddTab} onRemove={this.onRemoveTab} />\n        </div>\n      );\n    },\n    renderContent() {\n      const panels = this.getSlotPanels();\n      if (this.list?.length) {\n        return this.list.map((item) => <TTabPanel {...item} onRemove={this.onRemoveTab} />);\n      }\n      if (panels && panels.length) {\n        return <div class={[`${prefix}-tabs__content`]}>{panels}</div>;\n      }\n      console.warn('Tdesign error: list or slots is empty');\n    },\n  },\n\n  render() {\n    return (\n      <div class={[`${prefix}-tabs`]}>\n        {this.placement !== 'bottom'\n          ? [this.renderHeader(), this.renderContent()]\n          : [this.renderContent(), this.renderHeader()]}\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","components","TTabPanel","TTabNav","props","emits","data","panels","listPanels","methods","onAddTab","e","emitEvent","onChangeTab","value","onRemoveTab","index","eventData","getSlotPanels","content","renderTNodeJSX","map","item","children","Array","isArray","flat","filter","type","renderHeader","list","length","panelsData","selfItem","Object","keys","forEach","key","tabNavProps","theme","size","disabled","placement","addable","renderContent","console","warn","render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAMA,IAAI,aAAMC,MAAN,UAAV;AACA,YAAeC,eAAe,CAAC;AAC7BF,EAAAA,IAAI,EAAJA,IAD6B;AAE7BG,EAAAA,UAAU,EAAE;AACVC,IAAAA,SAAS,EAATA,SADU;AAEVC,IAAAA,OAAO,EAAPA;AAFU,GAFiB;AAM7BC,EAAAA,KAAK,oBACAA,KADA,CANwB;AAS7BC,EAAAA,KAAK,EAAE,CAAC,QAAD,EAAW,KAAX,EAAkB,QAAlB,EAA4B,cAA5B,CATsB;AAU7BC,EAAAA,IAV6B,kBAUtB;AACL,WAAO;AACLC,MAAAA,MAAM,EAAE,EADH;AAELC,MAAAA,UAAU,EAAE;AAFP,KAAP;AAID,GAf4B;AAgB7BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,QADO,oBACEC,CADF,EACK;AACVC,MAAAA,SAAS,CAAC,IAAD,EAAO,KAAP,EAAc;AAAED,QAAAA,CAAC,EAADA;AAAF,OAAd,CAAT;AACD,KAHM;AAIPE,IAAAA,WAJO,uBAIKC,KAJL,EAIY;AACjBF,MAAAA,SAAS,CAAC,IAAD,EAAO,QAAP,EAAiBE,KAAjB,CAAT;AACD,KANM;AAOPC,IAAAA,WAPO,6BAO0B;AAAA,UAAnBJ,CAAmB,QAAnBA,CAAmB;AAAA,UAAhBG,KAAgB,QAAhBA,KAAgB;AAAA,UAATE,KAAS,QAATA,KAAS;AAC/B,UAAMC,SAAS,GAAG;AAChBH,QAAAA,KAAK,EAALA,KADgB;AAEhBE,QAAAA,KAAK,EAALA,KAFgB;AAGhBL,QAAAA,CAAC,EAADA;AAHgB,OAAlB;AAKAC,MAAAA,SAAS,CAAC,IAAD,EAAO,QAAP,EAAiBK,SAAjB,CAAT;AACD,KAdM;AAePC,IAAAA,aAfO,2BAeS;AACd,UAAIC,OAAO,GAAGC,cAAc,CAAC,IAAD,EAAO,SAAP,CAA5B;AACA,UAAI,CAACD,OAAL,EACE,OAAO,EAAP;AACFA,MAAAA,OAAO,GAAGA,OAAO,CAACE,GAAR,CAAY,UAACC,IAAD,EAAU;AAC9B,YAAIA,IAAI,CAACC,QAAL,IAAiBC,KAAK,CAACC,OAAN,CAAcH,IAAI,CAACC,QAAnB,CAArB,EACE,OAAOD,IAAI,CAACC,QAAZ;AACF,eAAOD,IAAP;AACD,OAJS,EAIPI,IAJO,GAIAC,MAJA,CAIO,UAACL,IAAD,EAAU;AACzB,eAAOA,IAAI,CAACM,IAAL,CAAU9B,IAAV,KAAmB,WAA1B;AACD,OANS,CAAV;AAOA,aAAOqB,OAAP;AACD,KA3BM;AA4BPU,IAAAA,YA5BO,0BA4BQ;AAAA;;AACb,UAAMtB,MAAM,GAAG,CAAC,mBAAKuB,IAAL,kDAAWC,MAAX,GAAoB,KAAKD,IAAzB,GAAgC,KAAKZ,aAAL,EAAjC,KAA0D,EAAzE;AACA,UAAMc,UAAU,GAAGzB,MAAM,CAACc,GAAP,CAAW,UAACC,IAAD,EAAU;AACtC,YAAMW,QAAQ,GAAGX,IAAjB;;AACA,YAAIA,IAAI,CAAClB,KAAT,EAAgB;AACd8B,UAAAA,MAAM,CAACC,IAAP,CAAYb,IAAI,CAAClB,KAAjB,EAAwBgC,OAAxB,CAAgC,UAACC,GAAD,EAAS;AACvCJ,YAAAA,QAAQ,CAACI,GAAD,CAAR,GAAgBf,IAAI,CAAClB,KAAL,CAAWiC,GAAX,CAAhB;AACD,WAFD;AAGD;;AACD,eAAOJ,QAAP;AACD,OARkB,CAAnB;AASA,UAAMK,WAAW,GAAG;AAClBC,QAAAA,KAAK,EAAE,KAAKA,KADM;AAElBzB,QAAAA,KAAK,EAAE,KAAKA,KAFM;AAGlB0B,QAAAA,IAAI,EAAE,KAAKA,IAHO;AAIlBC,QAAAA,QAAQ,EAAE,KAAKA,QAJG;AAKlBC,QAAAA,SAAS,EAAE,KAAKA,SALE;AAMlBC,QAAAA,OAAO,EAAE,KAAKA,OANI;AAOlBpC,QAAAA,MAAM,EAAEyB;AAPU,OAApB;AASA;AAAA,+DACMjC,MADN,oBAC8B,IAD9B,oCAEMA,MAFN,iBAEmB,KAAK2C,SAFxB,GAEsC,IAFtC;AAAA,0CAGgBJ,WAHhB;AAAA,oBAGuC,KAAKzB,WAH5C;AAAA,iBAGgE,KAAKH,QAHrE;AAAA,oBAGyF,KAAKK;AAH9F;AAID,KApDM;AAqDP6B,IAAAA,aArDO,2BAqDS;AAAA;AAAA;;AACd,UAAMrC,MAAM,GAAG,KAAKW,aAAL,EAAf;;AACA,yBAAI,KAAKY,IAAT,wCAAI,YAAWC,MAAf,EAAuB;AACrB,eAAO,KAAKD,IAAL,CAAUT,GAAV,CAAc,UAACC,IAAD;AAAA,mDAAyBA,IAAzB;AAAA,wBAAyC,KAAI,CAACP;AAA9C;AAAA,SAAd,CAAP;AACD;;AACD,UAAIR,MAAM,IAAIA,MAAM,CAACwB,MAArB,EAA6B;AAC3B;AAAA,mBAAmB,WAAIhC,MAAJ;AAAnB,YAAiDQ,MAAjD;AACD;;AACDsC,MAAAA,OAAO,CAACC,IAAR,CAAa,uCAAb;AACD;AA9DM,GAhBoB;AAgF7BC,EAAAA,MAhF6B,oBAgFpB;AACP;AAAA,eAAmB,WAAIhD,MAAJ;AAAnB,QAAwC,KAAK2C,SAAL,KAAmB,QAAnB,GAA8B,CAAC,KAAKb,YAAL,EAAD,EAAsB,KAAKe,aAAL,EAAtB,CAA9B,GAA4E,CAAC,KAAKA,aAAL,EAAD,EAAuB,KAAKf,YAAL,EAAvB,CAApH;AACD;AAlF4B,CAAD,CAA9B;;;;"}
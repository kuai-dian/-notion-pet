{"version":3,"file":"swiper.js","sources":["../../src/swiper/swiper.tsx"],"sourcesContent":["import { defineComponent, VNode, computed } from 'vue';\nimport { prefix } from '../config';\nimport props from './props';\nimport { useChildComponentSlots } from '../hooks/slot';\n\nconst name = `${prefix}-swiper`;\n\nexport default defineComponent({\n  name: 'TSwiper',\n  components: {},\n\n  props: { ...props },\n\n  setup() {\n    const items = computed(() => useChildComponentSlots('TSwiperItem'));\n    return {\n      items,\n    };\n  },\n\n  data() {\n    return {\n      // 是否可见，关闭后置为false\n      visible: true,\n      // 轮播序列\n      index: 0,\n      // 自动轮播定时器handler\n      timeoutHandler: null,\n    };\n  },\n\n  watch: {\n    interval: {\n      handler() {\n        this.swiperTo(this.index); // 重置定时器\n      },\n      immediate: true,\n    },\n  },\n\n  methods: {\n    renderContent(): VNode {\n      let wraperStyles = {};\n      if (this.direction === 'vertical') {\n        wraperStyles = {\n          height: `${this.items.length * 100}%`,\n          transform: `translate3d(0,${(-this.index * 100) / this.items.length}%,0)`,\n          transition: `transform ${this.duration / 1000}s`,\n        };\n      } else {\n        wraperStyles = {\n          width: `${this.items.length * 100}%`,\n          transform: `translate3d(${(-this.index * 100) / this.items.length}%,0,0)`,\n          transition: `transform ${this.duration / 1000}s`,\n        };\n      }\n      return (\n        <div class={`${name}__content`}>\n          <div class={`${name}__swiper-wrap--${this.direction}`} style={wraperStyles}>\n            {this.items}\n          </div>\n        </div>\n      );\n    },\n\n    renderTrigger(): VNode {\n      const index = this.index % this.items.length;\n      return (\n        <ul class=\"t-swiper__trigger-wrap\">\n          {this.items.map((_: VNode, i: number) => (\n            <li class={i === index ? 't-swiper__trigger--active' : ''} onclick={() => this.swiperTo(i)}></li>\n          ))}\n        </ul>\n      );\n    },\n\n    swiperToNext() {\n      this.swiperTo(this.index + 1);\n    },\n\n    swiperTo(index: number) {\n      const findIndex = this.items.length === 0 ? 0 : index % this.items.length;\n      if (this.timeoutHandler) {\n        this.clearTimer();\n      }\n      this.index = findIndex;\n      if (this.interval > 0) {\n        this.timeoutHandler = setTimeout(() => {\n          this.swiperToNext();\n        }, this.interval);\n      }\n    },\n\n    setTimer() {\n      if (this.interval > 0) {\n        this.timeoutHandler = Number(\n          setTimeout(() => {\n            this.clearTimer();\n            this.swiperToNext();\n          }, this.interval),\n        );\n      }\n    },\n\n    clearTimer() {\n      clearTimeout(this.timeoutHandler);\n      this.timeoutHandler = null;\n    },\n  },\n  render(): VNode {\n    const swiperClass = [\n      `${name}`,\n      {\n        [`${prefix}-is-hidden`]: !this.visible,\n      },\n    ];\n    return (\n      <div class={swiperClass} onMouseenter={this.clearTimer} onMouseleave={this.setTimer}>\n        {this.renderContent()}\n        {this.renderTrigger()}\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","components","props","setup","items","computed","useChildComponentSlots","data","visible","index","timeoutHandler","watch","interval","handler","swiperTo","immediate","methods","renderContent","wraperStyles","direction","height","length","transform","transition","duration","width","renderTrigger","map","_","i","swiperToNext","findIndex","clearTimer","setTimeout","setTimer","Number","clearTimeout","render","swiperClass"],"mappings":"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"}
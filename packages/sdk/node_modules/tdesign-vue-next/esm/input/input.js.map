{"version":3,"file":"input.js","sources":["../../src/input/input.tsx"],"sourcesContent":["import { defineComponent, h, VNodeChild, nextTick } from 'vue';\nimport { BrowseIcon, BrowseOffIcon, CloseCircleFilledIcon } from 'tdesign-icons-vue-next';\nimport { InputValue } from './type';\nimport { getCharacterLength, omit } from '../utils/helper';\nimport getConfigReceiverMixins, { InputConfig } from '../config-provider/config-receiver';\nimport mixins from '../utils/mixins';\n\nimport CLASSNAMES from '../utils/classnames';\nimport { prefix } from '../config';\nimport props from './props';\nimport { emitEvent } from '../utils/event';\nimport { renderTNodeJSX } from '../utils/render-tnode';\n\nconst name = `${prefix}-input`;\nconst INPUT_WRAP_CLASS = `${prefix}-input__wrap`;\nconst INPUT_TIPS_CLASS = `${prefix}-input__tips`;\n\nfunction getValidAttrs(obj: Record<string, unknown>): Record<string, unknown> {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined') {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  ...mixins(getConfigReceiverMixins<InputConfig>('input')),\n  name: 'TInput',\n  inheritAttrs: false,\n  props: { ...props },\n  emits: ['enter', 'keydown', 'keyup', 'keypress', 'clear', 'change', 'focus', 'blur'],\n  data() {\n    return {\n      isHover: false,\n      focused: false,\n      renderType: this.type,\n    };\n  },\n  computed: {\n    showClear(): boolean {\n      return this.value && !this.disabled && this.clearable && this.isHover;\n    },\n    inputAttrs(): Record<string, any> {\n      return getValidAttrs({\n        autofocus: this.autofocus,\n        disabled: this.disabled,\n        readonly: this.readonly,\n        autocomplete: this.autocomplete,\n        placeholder: this.placeholder ?? this.t(this.global.placeholder),\n        maxlength: this.maxlength,\n        name: this.name || undefined,\n        type: this.renderType,\n      });\n    },\n  },\n  watch: {\n    autofocus: {\n      handler(val) {\n        if (val === true) {\n          this.$nextTick(() => {\n            (this.$refs.refInputElem as HTMLInputElement).focus();\n          });\n        }\n      },\n      immediate: true,\n    },\n  },\n  created() {\n    this.composing = false;\n  },\n  methods: {\n    mouseEvent(v: boolean) {\n      this.isHover = v;\n    },\n    renderIcon(icon: string | Function | undefined, iconType: 'prefix-icon' | 'suffix-icon') {\n      if (typeof icon === 'function') {\n        return icon(h);\n      }\n      if (this.$slots[iconType]) {\n        return this.$slots[iconType](null);\n      }\n      return null;\n    },\n    setInputValue(v: InputValue = ''): void {\n      const input = this.$refs.refInputElem as HTMLInputElement;\n      const sV = String(v);\n      if (!input) {\n        return;\n      }\n      if (input.value !== sV) {\n        input.value = sV;\n      }\n    },\n    focus(): void {\n      const input = this.$refs.refInputElem as HTMLInputElement;\n      input?.focus();\n    },\n    blur(): void {\n      const input = this.$refs.refInputElem as HTMLInputElement;\n      input?.blur();\n    },\n    handleInput(e: InputEvent): void {\n      // 中文输入的时候inputType是insertCompositionText所以中文输入的时候禁止触发。\n      const checkInputType = e.inputType && e.inputType === 'insertCompositionText';\n      if (e.isComposing || checkInputType) return;\n      this.inputValueChangeHandle(e);\n    },\n\n    handleKeydown(e: KeyboardEvent) {\n      if (this.disabled) return;\n      const { code } = e;\n      if (code === 'Enter' || code === 'NumpadEnter') {\n        emitEvent(this, 'enter', this.value, { e });\n      } else {\n        emitEvent(this, 'keydown', this.value, { e });\n      }\n    },\n    handleKeyUp(e: KeyboardEvent) {\n      if (this.disabled) return;\n      emitEvent(this, 'keyup', this.value, { e });\n    },\n    handleKeypress(e: KeyboardEvent) {\n      if (this.disabled) return;\n      emitEvent(this, 'keypress', this.value, { e });\n    },\n    onHandlePaste(e: ClipboardEvent) {\n      if (this.disabled) return;\n      // @ts-ignore\n      const clipData = e.clipboardData || window.clipboardData;\n      this.onPaste?.({ e, pasteValue: clipData?.getData('text/plain') });\n    },\n    emitPassword() {\n      const { renderType } = this;\n      const toggleType = renderType === 'password' ? 'text' : 'password';\n      this.renderType = toggleType;\n    },\n    emitClear({ e }: { e: MouseEvent }) {\n      emitEvent(this, 'clear', { e });\n      emitEvent(this, 'change', '', { e });\n      this.focus();\n      this.emitFocus(e);\n    },\n    emitFocus(e: FocusEvent) {\n      if (this.disabled) return;\n      this.focused = true;\n      emitEvent(this, 'focus', this.value, { e });\n    },\n    emitBlur(e: FocusEvent) {\n      this.focused = false;\n      emitEvent(this, 'blur', this.value, { e });\n    },\n    onCompositionend(e: CompositionEvent) {\n      this.inputValueChangeHandle(e);\n    },\n    inputValueChangeHandle(e: InputEvent | CompositionEvent) {\n      const { target } = e;\n      let val = (target as HTMLInputElement).value;\n      if (this.maxcharacter && this.maxcharacter >= 0) {\n        const stringInfo = getCharacterLength(val, this.maxcharacter);\n        val = typeof stringInfo === 'object' && stringInfo.characters;\n      }\n      emitEvent(this, 'change', val, { e });\n      // 受控\n      nextTick(() => this.setInputValue(this.value));\n    },\n\n    onInputMouseenter(e: MouseEvent) {\n      this.mouseEvent(true);\n      this.onMouseenter?.({ e });\n    },\n\n    onInputMouseleave(e: MouseEvent) {\n      this.mouseEvent(false);\n      this.onMouseleave?.({ e });\n    },\n  },\n\n  render(): VNodeChild {\n    const inputEvents = getValidAttrs({\n      onFocus: (e: FocusEvent) => this.emitFocus(e),\n      onBlur: this.emitBlur,\n      onKeydown: this.handleKeydown,\n      onKeyup: this.handleKeyUp,\n      onKeypresss: this.handleKeypress,\n      onPaste: this.onHandlePaste,\n      // input的change事件是失去焦点或者keydown的时候执行。这与api定义的change不符，所以不做任何变化。\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      onChange: () => {},\n    });\n\n    const wrapperAttrs = omit(this.$attrs, [...Object.keys(inputEvents), ...Object.keys(this.inputAttrs), 'input']);\n\n    const prefixIcon = this.renderIcon(this.prefixIcon, 'prefix-icon');\n\n    let suffixIcon = this.renderIcon(this.suffixIcon, 'suffix-icon');\n\n    const label = renderTNodeJSX(this, 'label');\n    const suffix = renderTNodeJSX(this, 'suffix');\n\n    const labelContent = label ? <div class={`${name}__prefix`}>{label}</div> : null;\n    const suffixContent = suffix ? <div class={`${name}__suffix`}>{suffix}</div> : null;\n\n    if (this.showClear) {\n      suffixIcon = <CloseCircleFilledIcon class={`${name}__suffix-clear`} onClick={this.emitClear} />;\n    }\n\n    if (this.type === 'password') {\n      if (this.renderType === 'password') {\n        suffixIcon = <BrowseOffIcon class={`${name}__suffix-clear`} onClick={this.emitPassword} />;\n      } else if (this.renderType === 'text') {\n        suffixIcon = <BrowseIcon class={`${name}__suffix-clear`} onClick={this.emitPassword} />;\n      }\n    }\n\n    const classes = [\n      name,\n      CLASSNAMES.SIZE[this.size] || '',\n      {\n        [CLASSNAMES.STATUS.disabled]: this.disabled,\n        [CLASSNAMES.STATUS.focused]: this.focused,\n        [`${prefix}-is-${this.status}`]: this.status,\n        [`${prefix}-is-disabled`]: this.disabled,\n        [`${prefix}-is-readonly`]: this.readonly,\n        [`${name}--prefix`]: prefixIcon || labelContent,\n        [`${name}--suffix`]: suffixIcon || suffixContent,\n        [`${name}--focused`]: this.focused,\n      },\n    ];\n    const inputNode = (\n      <div\n        class={classes}\n        onMouseenter={this.onInputMouseenter}\n        onMouseleave={this.onInputMouseleave}\n        {...{ ...wrapperAttrs }}\n      >\n        {prefixIcon ? <span class={[`${name}__prefix`, `${name}__prefix-icon`]}>{prefixIcon}</span> : null}\n        {labelContent}\n        <input\n          class={`${name}__inner`}\n          {...{ ...this.inputAttrs }}\n          {...inputEvents}\n          ref=\"refInputElem\"\n          value={this.value}\n          onInput={(e: Event) => this.handleInput(e as InputEvent)}\n          onCompositionend={this.onCompositionend}\n        />\n        {suffixContent}\n        {suffixIcon ? (\n          <span class={[`${name}__suffix`, `${name}__suffix-icon`, { [`${name}__clear`]: this.showClear }]}>\n            {suffixIcon}\n          </span>\n        ) : null}\n      </div>\n    );\n    const tips = renderTNodeJSX(this, 'tips');\n    if (tips) {\n      return (\n        <div class={INPUT_WRAP_CLASS}>\n          {inputNode}\n          <div class={`${INPUT_TIPS_CLASS} ${prefix}-input__tips--${this.status || 'normal'}`}>{tips}</div>\n        </div>\n      );\n    }\n    return inputNode;\n  },\n});\n"],"names":["name","prefix","INPUT_WRAP_CLASS","INPUT_TIPS_CLASS","getValidAttrs","obj","newObj","Object","keys","forEach","key","defineComponent","mixins","getConfigReceiverMixins","inheritAttrs","props","emits","data","isHover","focused","renderType","type","computed","showClear","value","disabled","clearable","inputAttrs","autofocus","readonly","autocomplete","placeholder","t","global","maxlength","watch","handler","val","$nextTick","$refs","refInputElem","focus","immediate","created","composing","methods","mouseEvent","v","renderIcon","icon","iconType","h","$slots","setInputValue","input","sV","String","blur","handleInput","e","checkInputType","inputType","isComposing","inputValueChangeHandle","handleKeydown","code","emitEvent","handleKeyUp","handleKeypress","onHandlePaste","clipData","clipboardData","window","onPaste","pasteValue","getData","emitPassword","toggleType","emitClear","emitFocus","emitBlur","onCompositionend","target","maxcharacter","stringInfo","getCharacterLength","characters","nextTick","onInputMouseenter","onMouseenter","onInputMouseleave","onMouseleave","render","inputEvents","onFocus","onBlur","onKeydown","onKeyup","onKeypresss","onChange","wrapperAttrs","omit","$attrs","prefixIcon","suffixIcon","label","renderTNodeJSX","suffix","labelContent","suffixContent","classes","CLASSNAMES","SIZE","size","STATUS","status","inputNode","tips"],"mappings":"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"}
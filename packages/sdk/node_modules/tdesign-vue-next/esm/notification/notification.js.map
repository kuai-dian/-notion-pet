{"version":3,"file":"notification.js","sources":["../../src/notification/notification.tsx"],"sourcesContent":["import { defineComponent, h, VNodeChild } from 'vue';\nimport { InfoCircleFilledIcon, CheckCircleFilledIcon, CloseIcon } from 'tdesign-icons-vue-next';\nimport isFunction from 'lodash/isFunction';\nimport { prefix } from '../config';\nimport props from './props';\nimport { emitEvent } from '../utils/event';\n\nconst name = `${prefix}-notification`;\n\nexport default defineComponent({\n  name: 'TNotification',\n  components: {\n    InfoCircleFilledIcon,\n    CheckCircleFilledIcon,\n    CloseIcon,\n  },\n  props: { ...props },\n  emits: ['duration-end', 'click-close-btn'],\n  mounted() {\n    if (this.duration > 0) {\n      const timer = setTimeout(() => {\n        clearTimeout(timer);\n        emitEvent(this, 'duration-end', this);\n      }, this.duration);\n    }\n  },\n  methods: {\n    close(e?: MouseEvent) {\n      emitEvent(this, 'click-close-btn', e, this);\n    },\n    renderIcon() {\n      let icon;\n      if (this.icon === false) return null;\n      if (isFunction(this.icon)) {\n        icon = this.icon(h);\n      } else if (this.$slots.icon) {\n        icon = this.$slots.icon(null);\n      } else if (this.theme) {\n        const iconType =\n          this.theme === 'success' ? (\n            <check-circle-filled-icon class={`t-is-${this.theme}`} />\n          ) : (\n            <info-circle-filled-icon class={`t-is-${this.theme}`} />\n          );\n        icon = <div class=\"t-notification__icon\">{iconType}</div>;\n      }\n      return icon;\n    },\n    renderClose() {\n      const { closeBtn } = this;\n      if (typeof closeBtn === 'boolean') {\n        return closeBtn && <close-icon onClick={this.close} class=\"t-message-close\" />;\n      }\n      let close: VNodeChild = null;\n      if (typeof closeBtn === 'function') {\n        close = closeBtn(h);\n      } else if (typeof closeBtn === 'string') {\n        close = closeBtn;\n      } else if (typeof this.$slots.closeBtn === 'function') {\n        close = this.$slots.closeBtn(null);\n      }\n      if (close) {\n        return (\n          <div class=\"t-icon-close\" onClick={this.close}>\n            {' '}\n            {close}{' '}\n          </div>\n        );\n      }\n    },\n    renderContent() {\n      let content;\n\n      switch (typeof this.content) {\n        case 'function': {\n          content = <div class={`${name}__content`}>{this.content(h)}</div>;\n          break;\n        }\n        case 'string': {\n          content = this.content ? <div class={`${name}__content`}>{this.content}</div> : '';\n          break;\n        }\n      }\n      content = this.$slots.default ? <div class={`${name}__content`}>{this.$slots.default(null)}</div> : content;\n\n      return content;\n    },\n    renderFooter() {\n      let footer: VNodeChild;\n\n      if (typeof this.footer === 'function') {\n        footer = this.footer(h);\n      }\n      footer = this.$slots.footer ? this.$slots.footer(null) : footer;\n\n      return footer;\n    },\n  },\n  render() {\n    const icon = this.renderIcon();\n    const close = this.renderClose();\n    const content = this.renderContent();\n    const footer = this.renderFooter();\n\n    return (\n      <div class={`${name}`}>\n        {icon}\n        <div class={`${name}__main`}>\n          <div class={`${name}__title__wrap`}>\n            <span class={`${name}__title`}>{this.title}</span>\n            {close}\n          </div>\n          {content}\n          {footer}\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","components","InfoCircleFilledIcon","CheckCircleFilledIcon","CloseIcon","props","emits","mounted","duration","timer","setTimeout","clearTimeout","emitEvent","methods","close","e","renderIcon","icon","isFunction","h","$slots","theme","iconType","renderClose","closeBtn","renderContent","content","renderFooter","footer","render","title"],"mappings":"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"}
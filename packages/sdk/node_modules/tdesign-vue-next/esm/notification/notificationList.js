/**
 * tdesign v0.8.0
 * (c) 2022 tdesign
 * @license MIT
 */

import { defineComponent, createVNode, mergeProps } from 'vue';
import _Notification from './notification.js';
import '@babel/runtime/helpers/typeof';
import '@babel/runtime/helpers/defineProperty';
import 'tdesign-icons-vue-next';
import 'lodash/isFunction';
import '../config.js';
import './props.js';
import '../utils/event.js';
import '../utils/helper.js';
import '@babel/runtime/helpers/objectWithoutProperties';
import '@babel/runtime/helpers/slicedToArray';
import 'lodash/camelCase';

var DEFAULT_Z_INDEX = 6e3;
var MARGIN = 16;
var NotificationList = defineComponent({
  components: {
    Notification: _Notification
  },
  props: {
    placement: {
      type: String,
      "default": "top-right",
      validator: function validator(v) {
        return ["top-left", "top-right", "bottom-left", "bottom-right"].indexOf(v) > -1;
      }
    }
  },
  data: function data() {
    return {
      list: [],
      zIndex: DEFAULT_Z_INDEX
    };
  },
  methods: {
    add: function add(options) {
      this.list.push(options);
      return this.list.length - 1;
    },
    remove: function remove(index) {
      this.list.splice(index, 1);
    },
    removeAll: function removeAll() {
      this.list = [];
    },
    notificationStyles: function notificationStyles(item) {
      var styles = {};
      this.placement.split("-").forEach(function (direction) {
        var margin = MARGIN;

        if (item.offset && item.offset[direction]) {
          margin += item.offset[direction];
        }

        styles["margin-".concat(direction)] = "".concat(margin, "px");
      });
      styles["z-index"] = item.zIndex ? item.zIndex : this.zIndex;
      return styles;
    },
    getListeners: function getListeners(index) {
      var _this = this;

      return {
        onClickCloseBtn: function onClickCloseBtn() {
          return _this.remove(index);
        },
        onDurationEnd: function onDurationEnd() {
          return _this.remove(index);
        }
      };
    },
    getLastChild: function getLastChild() {
      return this.$refs["notification".concat(this.list.length - 1)];
    }
  },
  render: function render() {
    var _this2 = this;

    if (!this.list.length) return;
    return createVNode("div", {
      "class": "t-notification__show--".concat(this.placement),
      "style": "z-index: ".concat(this.zIndex)
    }, [this.list.map(function (item, index) {
      return createVNode(_Notification, mergeProps({
        "ref": "notification".concat(index),
        "key": item.id,
        "style": _this2.notificationStyles(item)
      }, item, _this2.getListeners(index)), null);
    })]);
  }
});

export { NotificationList as default };
//# sourceMappingURL=notificationList.js.map

{"version":3,"file":"event.js","sources":["../../src/hooks/event.ts"],"sourcesContent":["import { onBeforeUnmount, onMounted } from 'vue';\nimport { getPropsApiByEvent } from '../utils/helper';\n\nexport type EmitEventName = { event: string; method: string } | string;\n\n/**\n * 组件对外传递事件\n * @param props 组件props\n * @param emit 事件名(注意使用中划线)\n * @param args 事件参数\n * @returns {emitEvent}\n * @example useEmitEvent<IProps>(props, emit);\n */\nexport function useEmitEvent<P extends Record<string, any>>(props: P, emit: (event: string, ...args: any[]) => void) {\n  return function emitEvent<T extends any[] = any[]>(eventName: string, ...args: T) {\n    let emitEventMethodName: string;\n    if (typeof eventName === 'string') {\n      emitEventMethodName = getPropsApiByEvent(eventName);\n    }\n\n    if (typeof props[emitEventMethodName] === 'function') {\n      props[emitEventMethodName](...args);\n    } else {\n      emit(eventName, ...args);\n    }\n  };\n}\n\n/**\n * 用于订阅Listener事件\n * @param updateSize\n */\nexport function useListener(type: string, listener: () => void): void {\n  onMounted(() => {\n    window.addEventListener(type, listener);\n  });\n\n  onBeforeUnmount(() => {\n    window.removeEventListener(type, listener);\n  });\n}\n"],"names":["useEmitEvent","props","emit","emitEvent","eventName","emitEventMethodName","getPropsApiByEvent","args","useListener","type","listener","onMounted","window","addEventListener","onBeforeUnmount","removeEventListener"],"mappings":";;;;;;;;;;;;;AAEO,SAASA,YAAT,CAAsBC,KAAtB,EAA6BC,IAA7B,EAAmC;AACxC,SAAO,SAASC,SAAT,CAAmBC,SAAnB,EAAuC;AAC5C,QAAIC,mBAAJ;;AACA,QAAI,OAAOD,SAAP,KAAqB,QAAzB,EAAmC;AACjCC,MAAAA,mBAAmB,GAAGC,kBAAkB,CAACF,SAAD,CAAxC;AACD;;AAJ2C,sCAANG,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAK5C,QAAI,OAAON,KAAK,CAACI,mBAAD,CAAZ,KAAsC,UAA1C,EAAsD;AACpDJ,MAAAA,KAAK,CAACI,mBAAD,CAAL,OAAAJ,KAAK,EAAyBM,IAAzB,CAAL;AACD,KAFD,MAEO;AACLL,MAAAA,IAAI,MAAJ,UAAKE,SAAL,SAAmBG,IAAnB;AACD;AACF,GAVD;AAWD;AACM,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,QAA3B,EAAqC;AAC1CC,EAAAA,SAAS,CAAC,YAAM;AACdC,IAAAA,MAAM,CAACC,gBAAP,CAAwBJ,IAAxB,EAA8BC,QAA9B;AACD,GAFQ,CAAT;AAGAI,EAAAA,eAAe,CAAC,YAAM;AACpBF,IAAAA,MAAM,CAACG,mBAAP,CAA2BN,IAA3B,EAAiCC,QAAjC;AACD,GAFc,CAAf;AAGD;;;;"}
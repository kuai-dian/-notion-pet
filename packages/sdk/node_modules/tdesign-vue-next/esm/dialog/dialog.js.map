{"version":3,"file":"dialog.js","sources":["../../src/dialog/dialog.tsx"],"sourcesContent":["import { defineComponent, Transition } from 'vue';\nimport { CloseIcon, InfoCircleFilledIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon } from 'tdesign-icons-vue-next';\n\nimport { prefix } from '../config';\nimport TButton from '../button';\nimport ActionMixin from './actions';\nimport { DialogCloseContext, TdDialogProps } from './type';\nimport props from './props';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport TransferDom from '../utils/transfer-dom';\nimport { ClassName, Styles } from '../common';\nimport { emitEvent } from '../utils/event';\nimport mixins from '../utils/mixins';\nimport { addClass, removeClass } from '../utils/dom';\nimport getConfigReceiverMixins, { DialogConfig } from '../config-provider/config-receiver';\n\nconst name = `${prefix}-dialog`;\nconst lockClass = `${prefix}-dialog--lock`;\n\nfunction GetCSSValue(v: string | number) {\n  return Number.isNaN(Number(v)) ? v : `${Number(v)}px`;\n}\n\n// 注册元素的拖拽事件\nfunction InitDragEvent(dragBox: HTMLElement) {\n  const target = dragBox;\n  target.addEventListener('mousedown', (targetEvent: MouseEvent) => {\n    // 算出鼠标相对元素的位置\n    const disX = targetEvent.clientX - target.offsetLeft;\n    const disY = targetEvent.clientY - target.offsetTop;\n    function mouseMoverHandler(documentEvent: MouseEvent) {\n      // 用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\n      const left = documentEvent.clientX - disX;\n      const top = documentEvent.clientY - disY;\n      // 移动当前元素\n      target.style.left = `${left}px`;\n      target.style.top = `${top}px`;\n    }\n    function mouseUpHandler() {\n      // 鼠标弹起来的时候不再移动\n      document.removeEventListener('mousemove', mouseMoverHandler);\n      // 预防鼠标弹起来后还会循环（即预防鼠标放上去的时候还会移动）\n      document.removeEventListener('mouseup', mouseUpHandler);\n    }\n    // 元素按下时注册document鼠标监听事件\n    document.addEventListener('mousemove', mouseMoverHandler);\n    // 鼠标弹起来移除document鼠标监听事件\n    document.addEventListener('mouseup', mouseUpHandler);\n    // 拖拽结束移除鼠标监听事件，解决文字拖拽结束事件未解绑问题\n    document.addEventListener('dragend', mouseUpHandler);\n  });\n}\nexport default defineComponent({\n  ...mixins(ActionMixin, getConfigReceiverMixins<DialogConfig>('dialog')),\n  name: 'TDialog',\n  components: {\n    CloseIcon,\n    InfoCircleFilledIcon,\n    CheckCircleFilledIcon,\n    ErrorCircleFilledIcon,\n    TButton,\n    Transition,\n  },\n\n  // 注册v-draggable指令,传入ture时候初始化拖拽事件\n  directives: {\n    TransferDom,\n    draggable(el, binding) {\n      // el 指令绑定的元素\n      if (el && binding && binding.value) {\n        InitDragEvent(el);\n      }\n    },\n  },\n\n  props: { ...props },\n\n  emits: [\n    'esc-keydown',\n    'update:visible',\n    'overlay-click',\n    'close-btn-click',\n    'cancel',\n    'confirm',\n    'opened',\n    'closed',\n    'close',\n  ],\n\n  data() {\n    return {\n      scrollWidth: 0,\n    };\n  },\n\n  computed: {\n    // 是否模态形式的对话框\n    isModal(): boolean {\n      return this.mode === 'modal';\n    },\n    // 是否非模态对话框\n    isModeless(): boolean {\n      return this.mode === 'modeless';\n    },\n\n    maskClass(): ClassName {\n      return [`${name}__mask`, !this.showOverlay && `${prefix}-is-hidden`];\n    },\n\n    dialogClass(): ClassName {\n      const dialogClass = [`${name}`, `${name}--default`, `${name}--${this.placement}`, `${name}__modal-${this.theme}`];\n      if (['modeless', 'modal'].includes(this.mode)) {\n        dialogClass.push(`${name}--fixed`);\n      }\n      return dialogClass;\n    },\n\n    dialogStyle(): Styles {\n      const { top, placement } = this;\n      let topStyle = {};\n\n      // 设置了top属性\n      if (top) {\n        const topValue = GetCSSValue(top);\n        topStyle = {\n          top: topValue,\n          transform: 'translate(-50%, 0)',\n          transformOrigin: '25% 25%',\n          maxHeight: `calc(100% - ${topValue})`,\n        };\n      } else if (placement === 'top') {\n        topStyle = {\n          maxHeight: 'calc(100% - 20%)',\n        };\n      }\n      return { width: GetCSSValue(this.width), ...topStyle };\n    },\n  },\n\n  watch: {\n    visible(value) {\n      if (value) {\n        const { scrollWidth } = this;\n        if (scrollWidth > 0) {\n          const bodyCssText = `position: relative;width: calc(100% - ${scrollWidth}px);`;\n          document.body.style.cssText = bodyCssText;\n        }\n        addClass(document.body, lockClass);\n      } else {\n        document.body.style.cssText = '';\n        removeClass(document.body, lockClass);\n      }\n      this.addKeyboardEvent(value);\n    },\n  },\n  mounted() {\n    this.scrollWidth = window.innerWidth - document.body.offsetWidth;\n  },\n\n  beforeUnmount() {\n    this.addKeyboardEvent(false);\n  },\n\n  methods: {\n    addKeyboardEvent(status: boolean) {\n      if (status) {\n        document.addEventListener('keydown', this.keyboardEvent);\n      } else {\n        document.removeEventListener('keydown', this.keyboardEvent);\n      }\n    },\n    keyboardEvent(e: KeyboardEvent) {\n      if (e.code === 'Escape') {\n        emitEvent<Parameters<TdDialogProps['onEscKeydown']>>(this, 'esc-keydown', { e });\n        // 根据closeOnEscKeydown判断按下ESC时是否触发close事件\n        if (this.closeOnEscKeydown) {\n          this.emitCloseEvent({\n            trigger: 'esc',\n            e,\n          });\n        }\n      }\n    },\n    overlayAction(e: MouseEvent) {\n      emitEvent<Parameters<TdDialogProps['onOverlayClick']>>(this, 'overlay-click', { e });\n      // 根据closeOnClickOverlay判断点击蒙层时是否触发close事件\n      if (this.closeOnOverlayClick) {\n        this.emitCloseEvent({\n          trigger: 'overlay',\n          e,\n        });\n      }\n    },\n    closeBtnAcion(e: MouseEvent) {\n      emitEvent<Parameters<TdDialogProps['onCloseBtnClick']>>(this, 'close-btn-click', { e });\n      this.emitCloseEvent({\n        trigger: 'close-btn',\n        e,\n      });\n    },\n\n    cancelBtnAction(e: MouseEvent) {\n      emitEvent<Parameters<TdDialogProps['onCancel']>>(this, 'cancel', { e });\n      this.emitCloseEvent({\n        trigger: 'cancel',\n        e,\n      });\n    },\n    confirmBtnAction(e: MouseEvent) {\n      emitEvent<Parameters<TdDialogProps['onConfirm']>>(this, 'confirm', { e });\n    },\n    // 打开弹窗动画结束时事件\n    afterEnter() {\n      emitEvent<Parameters<TdDialogProps['onOpened']>>(this, 'opened');\n    },\n    // 关闭弹窗动画结束时事件\n    afterLeave() {\n      emitEvent<Parameters<TdDialogProps['onClosed']>>(this, 'closed');\n    },\n\n    emitCloseEvent(context: DialogCloseContext) {\n      emitEvent<Parameters<TdDialogProps['onClose']>>(this, 'close', context);\n      // 默认关闭弹窗\n      emitEvent(this, 'update:visible', false);\n    },\n\n    // Vue在引入阶段对事件的处理还做了哪些初始化操作。Vue在实例上用一个_events属性存贮管理事件的派发和更新，\n    // 暴露出$on, $once, $off, $emit方法给外部管理事件和派发执行事件\n    // 所以通过判断_events某个事件下监听函数数组是否超过一个，可以判断出组件是否监听了当前事件\n    hasEventOn(name: string) {\n      // _events 因没有被暴露在vue实例接口中，只能把这个规则注释掉\n      // eslint-disable-next-line dot-notation\n      const eventFuncs = this['_events']?.[name];\n      return !!eventFuncs?.length;\n    },\n    getIcon() {\n      const icon = {\n        info: <InfoCircleFilledIcon class=\"t-is-info\" />,\n        warning: <ErrorCircleFilledIcon class=\"t-is-warning\" />,\n        danger: <ErrorCircleFilledIcon class=\"t-is-error\" />,\n        success: <CheckCircleFilledIcon class=\"t-is-success\" />,\n      };\n      return icon[this.theme];\n    },\n    renderDialog() {\n      // header 值为 true 显示空白头部\n      const defaultHeader = <h5 class=\"title\"></h5>;\n      const defaultCloseBtn = <CloseIcon />;\n      const body = renderContent(this, 'default', 'body');\n      const defaultFooter = (\n        <div>\n          {this.getCancelBtn({\n            cancelBtn: this.cancelBtn,\n            globalCancel: this.global.cancel,\n            className: `${prefix}-dialog__cancel`,\n          })}\n          {this.getConfirmBtn({\n            theme: this.theme,\n            confirmBtn: this.confirmBtn,\n            globalConfirm: this.global.confirm,\n            globalConfirmBtnTheme: this.global.confirmBtnTheme,\n            className: `${prefix}-dialog__confirm`,\n          })}\n        </div>\n      );\n      const bodyClassName = this.theme === 'default' ? `${name}__body` : `${name}__body__icon`;\n      return (\n        // /* 非模态形态下draggable为true才允许拖拽 */\n        <div\n          key=\"dialog\"\n          class={this.dialogClass}\n          style={this.dialogStyle}\n          v-draggable={this.isModeless && this.draggable}\n        >\n          <div class={`${name}__header`}>\n            {this.getIcon()}\n            {renderTNodeJSX(this, 'header', defaultHeader)}\n          </div>\n          <span class={`${name}__close`} onClick={this.closeBtnAcion}>\n            {renderTNodeJSX(this, 'closeBtn', defaultCloseBtn)}\n          </span>\n          <div class={bodyClassName}>{body}</div>\n          <div class={`${name}__footer`}>{renderTNodeJSX(this, 'footer', defaultFooter)}</div>\n        </div>\n      );\n    },\n  },\n  render() {\n    const maskView = this.isModal && <div key=\"mask\" class={this.maskClass} onClick={this.overlayAction}></div>;\n    const dialogView = this.renderDialog();\n    const view = [maskView, dialogView];\n    const ctxStyle: any = { zIndex: this.zIndex };\n    const ctxClass = [`${name}__ctx`, { 't-dialog__ctx--fixed': this.mode === 'modal' }];\n    return (\n      <transition\n        duration={300}\n        name={`${name}-zoom__vue`}\n        onAfterEnter={this.afterEnter}\n        onAfterLeave={this.afterLeave}\n      >\n        {(!this.destroyOnClose || this.visible) && (\n          <div v-show={this.visible} class={ctxClass} style={ctxStyle} v-transfer-dom={this.attach}>\n            {view}\n          </div>\n        )}\n      </transition>\n    );\n  },\n});\n"],"names":["name","prefix","lockClass","GetCSSValue","v","Number","isNaN","InitDragEvent","dragBox","target","addEventListener","targetEvent","disX","clientX","offsetLeft","disY","clientY","offsetTop","mouseMoverHandler","documentEvent","left","top","style","mouseUpHandler","document","removeEventListener","defineComponent","mixins","ActionMixin","getConfigReceiverMixins","components","CloseIcon","InfoCircleFilledIcon","CheckCircleFilledIcon","ErrorCircleFilledIcon","TButton","Transition","directives","TransferDom","draggable","el","binding","value","props","emits","data","scrollWidth","computed","isModal","mode","isModeless","maskClass","showOverlay","dialogClass","placement","theme","includes","push","dialogStyle","topStyle","topValue","transform","transformOrigin","maxHeight","width","watch","visible","bodyCssText","body","cssText","addClass","removeClass","addKeyboardEvent","mounted","window","innerWidth","offsetWidth","beforeUnmount","methods","status","keyboardEvent","e","code","emitEvent","closeOnEscKeydown","emitCloseEvent","trigger","overlayAction","closeOnOverlayClick","closeBtnAcion","cancelBtnAction","confirmBtnAction","afterEnter","afterLeave","context","hasEventOn","name2","eventFuncs","length","getIcon","icon","info","warning","danger","success","renderDialog","defaultHeader","defaultCloseBtn","renderContent","defaultFooter","getCancelBtn","cancelBtn","globalCancel","global","cancel","className","getConfirmBtn","confirmBtn","globalConfirm","confirm","globalConfirmBtnTheme","confirmBtnTheme","bodyClassName","renderTNodeJSX","render","maskView","dialogView","view","ctxStyle","zIndex","ctxClass","destroyOnClose","attach"],"mappings":"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"}
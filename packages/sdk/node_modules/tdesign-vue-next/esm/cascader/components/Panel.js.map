{"version":3,"file":"Panel.js","sources":["../../../src/cascader/components/Panel.tsx"],"sourcesContent":["import { defineComponent, PropType } from 'vue';\nimport { prefix } from '../../config';\n\n// utils\nimport { renderTNodeJSXDefault } from '../../utils/render-tnode';\nimport getConfigReceiverMixins, { CascaderConfig } from '../../config-provider/config-receiver';\nimport mixins from '../../utils/mixins';\n\n// common logic\nimport { getPanels, expendClickEffect, valueChangeEffect } from '../utils/panel';\n\n// Component\nimport Item from './Item';\n\n// type\nimport { ContextType, TreeNode, CascaderContextType } from '../interface';\nimport CascaderProps from '../props';\n\nconst name = `${prefix}-cascader`;\n\nexport default defineComponent({\n  ...mixins(getConfigReceiverMixins<CascaderConfig>('cascader')),\n\n  name: `${name}-panel`,\n  props: {\n    empty: CascaderProps.empty,\n    trigger: CascaderProps.trigger,\n    onChange: CascaderProps.onChange,\n    cascaderContext: {\n      type: Object as PropType<CascaderContextType>,\n    },\n  },\n  emits: ['change'],\n\n  computed: {\n    panels() {\n      return getPanels(this.cascaderContext.treeNodes);\n    },\n  },\n\n  render() {\n    const {\n      cascaderContext: { filterActive, treeNodes, inputWidth },\n      cascaderContext,\n      panels,\n    } = this;\n    const handleExpand = (ctx: ContextType, trigger: 'hover' | 'click') => {\n      const { node } = ctx;\n      const { trigger: propsTrigger, cascaderContext } = this;\n\n      expendClickEffect(propsTrigger, trigger, node, cascaderContext);\n    };\n\n    const handleChange = (ctx: ContextType) => {\n      const { node } = ctx;\n      const { cascaderContext } = this;\n\n      valueChangeEffect(node, cascaderContext);\n    };\n\n    // innerComponents\n\n    const renderEmpty = renderTNodeJSXDefault(\n      this,\n      'empty',\n      <div class={`${name}__panel--empty`}>{this.t(this.global.empty)}</div>,\n    );\n\n    const renderItem = (node: TreeNode) => (\n      <Item\n        key={node.value}\n        node={node}\n        cascaderContext={cascaderContext}\n        onClick={(ctx: ContextType) => {\n          handleExpand(ctx, 'click');\n        }}\n        onMouseenter={(ctx: ContextType) => {\n          handleExpand(ctx, 'hover');\n        }}\n        onChange={handleChange}\n      />\n    );\n\n    const panelsContainer = panels.map((panel: TreeNode[], index: number) => (\n      <ul\n        class={[`${name}__menu`, 'narrow-scrollbar', { [`${name}__menu--segment`]: index !== panels.length - 1 }]}\n        key={index}\n      >\n        {panel.map((node: TreeNode) => renderItem(node))}\n      </ul>\n    ));\n\n    const filterPanelsContainer = (\n      <ul class={[`${name}__menu`, 'narrow-scrollbar', `${name}__menu--segment`, `${name}__menu--filter`]}>\n        {treeNodes.map((node: TreeNode) => renderItem(node))}\n      </ul>\n    );\n\n    const renderPanels = filterActive ? filterPanelsContainer : panelsContainer;\n\n    return (\n      <div\n        class={[`${name}__panel`, { [`${name}--normal`]: panels.length }]}\n        style={{\n          width: panels.length === 0 ? `${inputWidth}px` : null,\n        }}\n      >\n        {panels && panels.length ? renderPanels : renderEmpty}\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","mixins","getConfigReceiverMixins","props","empty","CascaderProps","trigger","onChange","cascaderContext","type","Object","emits","computed","panels","getPanels","treeNodes","render","filterActive","inputWidth","handleExpand","ctx","node","propsTrigger","cascaderContext2","expendClickEffect","handleChange","valueChangeEffect","renderEmpty","renderTNodeJSXDefault","t","global","renderItem","value","panelsContainer","map","panel","index","length","filterPanelsContainer","renderPanels","width"],"mappings":"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"}
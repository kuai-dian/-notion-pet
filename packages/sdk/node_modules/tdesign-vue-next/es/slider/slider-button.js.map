{"version":3,"file":"slider-button.js","sources":["../../src/slider/slider-button.tsx"],"sourcesContent":["import { defineComponent, ComponentPublicInstance } from 'vue';\nimport { prefix } from '../config';\nimport TPopup from '../popup/index';\nimport { emitEvent } from '../utils/event';\n\nconst name = `${prefix}-slider-button`;\n\nexport default defineComponent({\n  name,\n  components: {\n    TPopup,\n  },\n  props: {\n    value: {\n      type: [Number],\n      default: 0,\n    },\n    vertical: {\n      type: Boolean,\n      default: false,\n    },\n    popupClass: {\n      type: String,\n      default: '',\n    },\n    tooltipProps: {\n      type: [Boolean, Object],\n      default: true,\n    },\n  },\n  emits: ['input'],\n  data() {\n    return {\n      hovering: false,\n      dragging: false,\n      isClick: false,\n      startX: 0,\n      startY: 0,\n      currentX: 0,\n      currentY: 0,\n      startPos: 0,\n      newPos: null,\n      prevValue: this.value,\n      showTooltip: true,\n      trigger: 'hover',\n      showArrow: true,\n      overlayStyle: undefined,\n      overlayClassName: undefined,\n      attach: 'body',\n      popupVisible: false,\n    };\n  },\n\n  computed: {\n    placement() {\n      if (this.tooltipProps instanceof Object) {\n        const { placement } = this.tooltipProps;\n        if (placement) return placement;\n      }\n\n      return this.vertical ? 'right' : 'top';\n    },\n    rangeDiff() {\n      return this.max - this.min;\n    },\n    formatValue() {\n      return (this.enableFormat && this.$parent.formatpopup(this.value)) || this.value;\n    },\n    disabled() {\n      return this.$parent.disabled;\n    },\n    max() {\n      return this.$parent.max;\n    },\n    min() {\n      return this.$parent.min;\n    },\n    step() {\n      return this.$parent.step;\n    },\n    precision() {\n      return this.$parent.precision;\n    },\n    currentPos() {\n      return `${((this.value - this.min) / this.rangeDiff) * 100}%`;\n    },\n    enableFormat() {\n      return this.$parent.formatpopup instanceof Function;\n    },\n    wrapperStyle() {\n      return this.vertical ? { bottom: this.currentPos } : { left: this.currentPos };\n    },\n  },\n  watch: {\n    dragging(val) {\n      this.$parent.dragging = val;\n    },\n  },\n  mounted() {\n    this.showTooltip = !this.tooltipProps === false;\n    this.setTooltipProps();\n  },\n  methods: {\n    setTooltipProps() {\n      if (this.tooltipProps instanceof Object) {\n        const { trigger, destroyOnHide, showArrow, overlayStyle, overlayClassName, attach } = this.tooltipProps;\n        if (!this.empty(trigger)) {\n          this.trigger = trigger;\n        }\n        this.destroyOnHide = destroyOnHide;\n        if (!this.empty(showArrow)) {\n          this.showArrow = showArrow;\n        }\n\n        this.overlayStyle = overlayStyle;\n        this.overlayClassName = overlayClassName;\n        if (!this.empty(attach)) {\n          this.attach = attach;\n        }\n      }\n    },\n    showPopup() {\n      this.popupVisible = true;\n    },\n    hidePopup() {\n      this.popupVisible = false;\n    },\n\n    handleMouseEnter() {\n      this.hovering = true;\n      (this.$refs.button as ComponentPublicInstance).focus();\n      this.showPopup();\n    },\n    handleMouseLeave() {\n      this.hovering = false;\n      if (!this.dragging) {\n        this.hidePopup();\n      }\n    },\n    onButtonDown(event: MouseEvent | TouchEvent) {\n      if (this.disabled) {\n        return;\n      }\n      event.preventDefault();\n      this.onDragStart(event);\n      window.addEventListener('mousemove', this.onDragging);\n      window.addEventListener('mouseup', this.onDragEnd);\n      window.addEventListener('touchmove', this.onDragging);\n      window.addEventListener('touchend', this.onDragEnd);\n      window.addEventListener('contextmenu', this.onDragEnd);\n    },\n    onNativeKeyDown(e: KeyboardEvent) {\n      const { code } = e;\n      e.preventDefault();\n      if (code === 'ArrowDown' || code === 'ArrowLeft') {\n        this.onKeyDown('sub');\n      }\n      if (code === 'ArrowUp' || code === 'ArrowRight') {\n        this.onKeyDown('add');\n      }\n    },\n    onKeyDown(state: 'sub' | 'add') {\n      if (this.disabled) {\n        return;\n      }\n      let stepLength = (this.step / this.rangeDiff) * 100;\n      if (state === 'sub') {\n        stepLength = -stepLength;\n      }\n      this.newPos = parseFloat(this.currentPos) + stepLength;\n      this.setPosition(this.newPos);\n      // this.$parent.emitChange(parseInt(this.newPos));\n    },\n    onDragStart(event: MouseEvent | TouchEvent) {\n      this.dragging = true;\n      this.isClick = true;\n      const { type } = event;\n      let { clientY, clientX } = event as MouseEvent;\n      if (type === 'touchstart') {\n        const touch = (event as TouchEvent).touches;\n        [clientY, clientX] = [touch[0].clientY, touch[0].clientX];\n      }\n      if (this.vertical) {\n        this.startY = clientY;\n      } else {\n        this.startX = clientX;\n      }\n      this.startPos = parseFloat(this.currentPos);\n      this.newPos = this.startPos;\n    },\n    onDragging(e: MouseEvent | TouchEvent) {\n      const event = e;\n      if (!this.dragging) {\n        return;\n      }\n      this.isClick = false;\n      this.$parent.resetSize();\n      let diff = 0;\n\n      const parentSliderSize = this.$parent.sliderSize;\n      if (this.vertical) {\n        this.currentY = (event as MouseEvent).clientY;\n        diff = this.startY - this.currentY;\n      } else {\n        this.currentX = (event as MouseEvent).clientX;\n        diff = this.currentX - this.startX;\n      }\n\n      if (event.type === 'touchmove') {\n        const touch = (event as TouchEvent).touches;\n        const [clientY, clientX] = [touch[0].clientY, touch[0].clientX];\n        this.clientY = clientY;\n        this.clientX = clientX;\n      }\n\n      diff = (diff / parentSliderSize) * 100;\n      this.newPos = this.startPos + diff;\n      this.setPosition(this.newPos);\n    },\n    onDragEnd() {\n      if (this.dragging) {\n        setTimeout(() => {\n          this.dragging = false;\n          this.hidePopup();\n          if (!this.isClick) {\n            this.setPosition(this.newPos);\n            // this.$parent.emitChange(parseInt(this.newPos));\n          }\n        }, 0);\n        window.removeEventListener('mousemove', this.onDragging);\n        window.removeEventListener('touchmove', this.onDragging);\n        window.removeEventListener('mouseup', this.onDragEnd);\n        window.removeEventListener('touchend', this.onDragEnd);\n        window.removeEventListener('contextmenu', this.onDragEnd);\n      }\n    },\n    setPosition(pos: number) {\n      let newPos = pos;\n      if (newPos === null || Number.isNaN(newPos)) {\n        return;\n      }\n\n      if (newPos > 100) {\n        newPos = 100;\n      } else if (newPos < 0) {\n        newPos = 0;\n      }\n      const perStepLen = (100 * this.step) / this.rangeDiff;\n      const steps = Math.round(newPos / perStepLen);\n      let value = steps * perStepLen * this.rangeDiff * 0.01;\n      value += this.min;\n      value = Number(parseFloat(`${value}`).toFixed(this.precision));\n      emitEvent(this, 'input', value);\n      this.$nextTick(() => {\n        this.$refs.popup && (this.$refs.popup as ComponentPublicInstance).updatePopper();\n      });\n      if (!this.dragging && this.value !== this.prevValue) {\n        this.prevValue = this.value;\n      }\n    },\n    empty(str: undefined | null | string) {\n      return str === undefined || str === null;\n    },\n  },\n  render() {\n    return (\n      <div\n        ref=\"button\"\n        class={`${prefix}-slider__button-wrapper`}\n        style={this.wrapperStyle}\n        tabindex=\"0\"\n        show-tooltip={this.showTooltip}\n        disabled={this.disabled}\n        onmouseenter={this.handleMouseEnter}\n        onmouseleave={this.handleMouseLeave}\n        onmousedown={this.onButtonDown}\n        ontouchstart={this.onButtonDown}\n        onfocus={this.handleMouseEnter}\n        onblur={this.handleMouseLeave}\n        onKeydown={this.onNativeKeyDown}\n      >\n        <t-popup\n          visible={this.popupVisible}\n          ref=\"popup\"\n          popper-class={this.popupClass}\n          disabled={!this.showTooltip}\n          content={String(this.formatValue)}\n          placement={this.placement}\n          trigger={this.trigger}\n          showArrow={this.showArrow}\n          overlayStyle={this.overlayStyle}\n          overlayClassName={this.overlayClassName}\n          attach={this.attach}\n        >\n          <div class={[`${prefix}-slider__button`, { [`${prefix}-slider__button--dragging`]: this.dragging }]} />\n        </t-popup>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","components","TPopup","props","value","type","Number","vertical","Boolean","popupClass","String","tooltipProps","Object","emits","data","hovering","dragging","isClick","startX","startY","currentX","currentY","startPos","newPos","prevValue","showTooltip","trigger","showArrow","overlayStyle","overlayClassName","attach","popupVisible","computed","placement","rangeDiff","max","min","formatValue","enableFormat","$parent","formatpopup","disabled","step","precision","currentPos","Function","wrapperStyle","bottom","left","watch","val","mounted","setTooltipProps","methods","destroyOnHide","empty","showPopup","hidePopup","handleMouseEnter","$refs","button","focus","handleMouseLeave","onButtonDown","event","preventDefault","onDragStart","window","addEventListener","onDragging","onDragEnd","onNativeKeyDown","e","code","onKeyDown","state","stepLength","parseFloat","setPosition","clientY","clientX","touch","touches","resetSize","diff","parentSliderSize","sliderSize","setTimeout","removeEventListener","pos","isNaN","perStepLen","steps","Math","round","toFixed","emitEvent","$nextTick","popup","updatePopper","str","render"],"mappings":"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"}
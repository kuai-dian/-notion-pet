{"version":3,"file":"sorter-button.js","sources":["../../../src/table/primary-table/sorter-button.tsx"],"sourcesContent":["import { defineComponent, PropType, h } from 'vue';\nimport isFunction from 'lodash/isFunction';\nimport { ChevronDownIcon } from 'tdesign-icons-vue-next';\nimport mixins from '../../utils/mixins';\nimport getConfigReceiverMixins, { TableConfig } from '../../config-provider/config-receiver';\nimport { SortType } from '../type';\nimport { prefix } from '../../config';\nimport Tooltip from '../../tooltip';\nimport { Styles } from '../../common';\n\nconst tooltips = {\n  asc: '点击升序',\n  desc: '点击降序',\n  cancel: '点击取消排序',\n};\n\ntype SortTypeEnums = Array<'desc' | 'asc'>;\n\nexport default defineComponent({\n  ...mixins(getConfigReceiverMixins<TableConfig>('table')),\n  name: `${prefix}-sorter-button`,\n  props: {\n    sortType: {\n      type: String as PropType<SortType>,\n      default: null,\n    },\n    sortOrder: {\n      type: String,\n      default: (): string => '',\n    },\n    nextSortOrder: {\n      type: String,\n      required: false,\n      default: 'cancel',\n    },\n  },\n  emits: ['change'],\n  computed: {\n    allowSortTypes(): SortTypeEnums {\n      return this.sortType === 'all' ? ['asc', 'desc'] : [this.sortType];\n    },\n  },\n  methods: {\n    getSortIcon(direction: string, className: string) {\n      const icon = isFunction(this.global.sortIcon) ? this.global.sortIcon(h) : <ChevronDownIcon size=\"16px\" />;\n      let style: Styles = {\n        left: '0px',\n      };\n      if (direction === 'asc') {\n        style = {\n          transform: 'rotate(-180deg)',\n          top: '-1px',\n          ...style,\n        };\n      } else {\n        style.bottom = '-1px';\n      }\n      const sortClassName = [`${prefix}-table__sort-icon`, className, `${prefix}-table-sort-${direction}`];\n      return h(icon, {\n        style,\n        class: sortClassName,\n      });\n    },\n  },\n  render() {\n    const { allowSortTypes, sortOrder, nextSortOrder } = this;\n    const buttonProps = { class: allowSortTypes.length > 1 ? `${prefix}-table__double-icons` : '' };\n    const tips = tooltips[nextSortOrder];\n    const sortButton = allowSortTypes.map((direction: string) => {\n      const className = direction === sortOrder ? `${prefix}-table__sort-icon--active` : `${prefix}-icon-sort--default`;\n      return this.getSortIcon(direction, className);\n    });\n    return (\n      <div class={`${prefix}-table__cell--sort-trigger`} {...buttonProps}>\n        {tips ? (\n          <Tooltip style=\"line-height: 0px;position:relative;\" content={tips} showArrow={false}>\n            {sortButton}\n          </Tooltip>\n        ) : (\n          sortButton\n        )}\n      </div>\n    );\n  },\n});\n"],"names":["tooltips","asc","desc","cancel","defineComponent","mixins","getConfigReceiverMixins","name","prefix","props","sortType","type","String","sortOrder","nextSortOrder","required","emits","computed","allowSortTypes","methods","getSortIcon","direction","className","icon","isFunction","global","sortIcon","h","style","left","transform","top","bottom","sortClassName","render","buttonProps","length","tips","sortButton","map"],"mappings":"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"}
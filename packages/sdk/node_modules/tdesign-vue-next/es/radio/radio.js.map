{"version":3,"file":"radio.js","sources":["../../src/radio/radio.tsx"],"sourcesContent":["import { defineComponent, VNode } from 'vue';\nimport { prefix } from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport { omit } from '../utils/helper';\nimport props from './props';\nimport { emitEvent } from '../utils/event';\nimport { TdRadioProps } from './type';\n\nconst name = `${prefix}-radio`;\nexport const radioBtnName = `${prefix}-radio-button`;\n\nfunction getValidAttrs(obj: Record<string, any>): Record<string, any> {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined') {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  name: 'TRadio',\n  inject: {\n    radioGroup: { default: undefined },\n    radioButton: { default: undefined },\n  },\n  inheritAttrs: false,\n  props: { ...props },\n  emits: ['change', 'click'],\n  methods: {\n    handleChange(e: Event) {\n      if (this.radioGroup && this.radioGroup.handleRadioChange) {\n        this.radioGroup.handleRadioChange(this.value, { e });\n      } else {\n        const target = e.target as HTMLInputElement;\n        emitEvent(this, 'change', target.checked, { e });\n      }\n    },\n    handleClick(e: Event) {\n      this.$emit('click');\n      if (!this.checked || !this.allowUncheck) return;\n      if (this.radioGroup) {\n        this.radioGroup.$emit('checked-change', undefined, { e });\n      } else {\n        emitEvent<Parameters<TdRadioProps['onChange']>>(this, 'change', false, { e });\n      }\n    },\n  },\n  render(): VNode {\n    const { $attrs, $slots, radioGroup, radioButton } = this;\n    const children: VNode[] | VNode | string = $slots.default && $slots.default(null);\n\n    const inputProps = {\n      checked: this.checked,\n      disabled: this.disabled,\n      value: this.value,\n      name: this.name,\n    };\n\n    const inputEvents = getValidAttrs({\n      focus: $attrs.onFocus,\n      blur: $attrs.onBlur,\n      keydown: $attrs.onKeydown,\n      keyup: $attrs.onKeyup,\n      keypresss: $attrs.onKeypresss,\n    });\n\n    const events = [...Object.keys(inputEvents), 'input', 'change'].map(\n      (str) => `on${str[0].toUpperCase()}${str.slice(1)}`,\n    );\n    const wrapperAttrs = omit($attrs, events);\n\n    if (radioGroup) {\n      inputProps.checked = this.value === radioGroup.value;\n      inputProps.disabled = this.disabled === undefined ? radioGroup.disabled : this.disabled;\n      inputProps.name = radioGroup.name;\n    }\n\n    const prefixCls = radioButton ? radioBtnName : name;\n\n    const inputClass = [\n      `${prefixCls}`,\n      {\n        [CLASSNAMES.STATUS.checked]: inputProps.checked,\n        [CLASSNAMES.STATUS.disabled]: inputProps.disabled,\n      },\n    ];\n\n    return (\n      <label class={inputClass} {...wrapperAttrs}>\n        <input\n          type=\"radio\"\n          class={`${prefixCls}__former`}\n          {...inputEvents}\n          {...inputProps}\n          onChange={this.handleChange}\n          onClick={this.handleClick}\n        />\n        <span class={`${prefixCls}__input`}></span>\n        <span class={`${prefixCls}__label`}>{children}</span>\n      </label>\n    );\n  },\n});\n"],"names":["name","prefix","radioBtnName","getValidAttrs","obj","newObj","Object","keys","forEach","key","defineComponent","inject","radioGroup","radioButton","inheritAttrs","props","emits","methods","handleChange","e","handleRadioChange","value","target","emitEvent","checked","handleClick","$emit","allowUncheck","render","$attrs","$slots","children","inputProps","disabled","inputEvents","focus","onFocus","blur","onBlur","keydown","onKeydown","keyup","onKeyup","keypresss","onKeypresss","events","map","str","toUpperCase","slice","wrapperAttrs","omit","prefixCls","inputClass","CLASSNAMES","STATUS"],"mappings":"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"}
{"version":3,"file":"common.js","sources":["../../src/grid/common.ts"],"sourcesContent":["import { ref } from 'vue';\nimport isObject from 'lodash/isObject';\nimport { TdColProps, TdRowProps } from './type';\nimport { calcSize } from '../utils/responsive';\nimport { useListener } from '../hooks/event';\n\nexport interface RowProviderType {\n  gutter: TdRowProps['gutter'];\n}\n\n/**\n * rowSizeHook\n * @returns\n */\nexport function useRowSize() {\n  const size = ref(calcSize(window.innerWidth));\n  const updateSize = () => {\n    size.value = calcSize(window.innerWidth);\n  };\n\n  useListener('resize', updateSize);\n\n  return size;\n}\n\n/**\n *\n * @param name\n * @param props\n * @returns\n */\nexport function getRowClasses(name: string, props: TdRowProps) {\n  const { justify, align } = props;\n  return [\n    name,\n    {\n      [`${name}--${justify}`]: justify,\n      [`${name}--${align}`]: align,\n    },\n  ];\n}\n\n/**\n *\n * @param gutter\n * @param currentSize\n * @returns\n */\nexport function calcRowStyle(gutter: TdRowProps['gutter'], currentSize: string) {\n  const rowStyle = {};\n  const getMarginStyle = (gutter: number) =>\n    Object.assign(rowStyle, {\n      marginLeft: `${gutter / -2}px`,\n      marginRight: `${gutter / -2}px`,\n    });\n\n  const getRowGapStyle = (gutter: number) =>\n    Object.assign(rowStyle, {\n      rowGap: `${gutter}px`,\n    });\n\n  const strategyMap = {\n    isNumber: (gutter: TdRowProps['gutter']) => {\n      if (typeof gutter === 'number') {\n        getMarginStyle(gutter);\n      }\n    },\n    isArray: (gutter: TdRowProps['gutter']) => {\n      if (Array.isArray(gutter) && gutter.length) {\n        strategyMap.isNumber(gutter[0]);\n\n        if (typeof gutter[1] === 'number') {\n          getRowGapStyle(gutter[1]);\n        }\n\n        if (isObject(gutter[0]) && gutter[0][currentSize] !== undefined) {\n          getMarginStyle(gutter[0][currentSize]);\n        }\n\n        if (isObject(gutter[1]) && gutter[1][currentSize] !== undefined) {\n          getRowGapStyle(gutter[1][currentSize]);\n        }\n      }\n    },\n    isObject: (gutter: TdRowProps['gutter']) => {\n      if (isObject(gutter) && gutter[currentSize]) {\n        if (Array.isArray(gutter) && gutter.length) {\n          getMarginStyle(gutter[currentSize][0]);\n          getRowGapStyle(gutter[currentSize][1]);\n        } else {\n          getMarginStyle(gutter[currentSize]);\n        }\n      }\n    },\n  };\n\n  Object.keys(strategyMap).forEach((item) => {\n    strategyMap[item](gutter);\n  });\n\n  return rowStyle;\n}\n\n/**\n * 解析Flex\n * @param flex\n * @returns\n */\nexport function parseFlex(flex: TdColProps['flex']): string {\n  if (typeof flex === 'number') {\n    return `${flex} ${flex} 0`;\n  }\n  // 判断fle是否\n  if (/^\\d+(\\.\\d+)?(px|r?em|%)$/.test(flex)) {\n    return `0 0 ${flex}`;\n  }\n  return flex;\n}\n\n/**\n * 计算ColPadding\n * @param gutter\n * @param currentSize\n * @returns\n */\nexport function calcColPadding(gutter: TdRowProps['gutter'], currentSize: string) {\n  const paddingObj = {};\n  const getPaddingStyle = (gutter: number) =>\n    Object.assign(paddingObj, {\n      paddingLeft: `${gutter / 2}px`,\n      paddingRight: `${gutter / 2}px`,\n    });\n\n  const strategyMap = {\n    isNumber: (gutter: TdRowProps['gutter']) => {\n      if (typeof gutter === 'number') {\n        getPaddingStyle(gutter);\n      }\n    },\n    isArray: (gutter: TdRowProps['gutter']) => {\n      if (Array.isArray(gutter) && gutter.length) {\n        if (typeof gutter[0] === 'number') {\n          getPaddingStyle(gutter[0]);\n        }\n        if (isObject(gutter[0]) && gutter[0][currentSize]) {\n          getPaddingStyle(gutter[0][currentSize]);\n        }\n      }\n    },\n    isObject: (gutter: TdRowProps['gutter']) => {\n      if (isObject(gutter) && gutter[currentSize]) {\n        getPaddingStyle(gutter[currentSize]);\n      }\n    },\n  };\n\n  Object.keys(strategyMap).forEach((item) => {\n    strategyMap[item](gutter);\n  });\n\n  return paddingObj;\n}\n\n/**\n * 获取 col size\n * @param props\n * @returns\n */\nexport function getColClasses(name: string, props: TdColProps) {\n  const { span, order, offset, push, pull } = props;\n  const allSizes = ['xs', 'sm', 'md', 'lg', 'xl', 'xxl'];\n\n  const ColSizeClasses = allSizes.reduce((acc, currSize) => {\n    const sizeProp = props[currSize];\n    let sizeObject: any = {};\n    if (typeof sizeProp === 'number') {\n      sizeObject.span = sizeProp;\n    } else if (isObject(sizeProp)) {\n      sizeObject = sizeProp || {};\n    }\n    return {\n      ...acc,\n      [`${name}-${currSize}-${sizeObject.span}`]: sizeObject.span !== undefined,\n      [`${name}-${currSize}-order-${sizeObject.order}`]: parseInt(sizeObject.order, 10) >= 0,\n      [`${name}-${currSize}-offset-${sizeObject.offset}`]: parseInt(sizeObject.offset, 10) >= 0,\n      [`${name}-${currSize}-push-${sizeObject.push}`]: parseInt(sizeObject.push, 10) >= 0,\n      [`${name}-${currSize}-pull-${sizeObject.pull}`]: parseInt(sizeObject.pull, 10) >= 0,\n    };\n  }, {});\n\n  return {\n    [`${name}`]: true,\n    [`${name}-${span}`]: span !== undefined,\n    [`${name}-order-${order}`]: order,\n    [`${name}-offset-${offset}`]: offset,\n    [`${name}-push-${push}`]: push,\n    [`${name}-pull-${pull}`]: pull,\n    ...ColSizeClasses,\n  };\n}\n"],"names":["useRowSize","size","ref","calcSize","window","innerWidth","updateSize","value","useListener","getRowClasses","name","props","justify","align","calcRowStyle","gutter","currentSize","rowStyle","getMarginStyle","gutter2","Object","assign","marginLeft","marginRight","getRowGapStyle","rowGap","strategyMap","isNumber","isArray","Array","length","isObject","keys","forEach","item","parseFlex","flex","test","calcColPadding","paddingObj","getPaddingStyle","paddingLeft","paddingRight","getColClasses","span","order","offset","push","pull","allSizes","ColSizeClasses","reduce","acc","currSize","sizeProp","sizeObject","parseInt"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIO,SAASA,UAAT,GAAsB;AAC3B,MAAMC,IAAI,GAAGC,OAAG,CAACC,yBAAQ,CAACC,MAAM,CAACC,UAAR,CAAT,CAAhB;;AACA,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBL,IAAAA,IAAI,CAACM,KAAL,GAAaJ,yBAAQ,CAACC,MAAM,CAACC,UAAR,CAArB;AACD,GAFD;;AAGAG,EAAAA,uBAAW,CAAC,QAAD,EAAWF,UAAX,CAAX;AACA,SAAOL,IAAP;AACD;AACM,SAASQ,aAAT,CAAuBC,IAAvB,EAA6BC,KAA7B,EAAoC;AAAA;;AACzC,MAAQC,OAAR,GAA2BD,KAA3B,CAAQC,OAAR;AAAA,MAAiBC,KAAjB,GAA2BF,KAA3B,CAAiBE,KAAjB;AACA,SAAO,CACLH,IADK,kEAGCA,IAHD,eAGUE,OAHV,GAGsBA,OAHtB,uDAICF,IAJD,eAIUG,KAJV,GAIoBA,KAJpB,SAAP;AAOD;AACM,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,WAA9B,EAA2C;AAChD,MAAMC,QAAQ,GAAG,EAAjB;;AACA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,OAAD;AAAA,WAAaC,MAAM,CAACC,MAAP,CAAcJ,QAAd,EAAwB;AAC1DK,MAAAA,UAAU,YAAKH,OAAO,GAAG,CAAC,CAAhB,OADgD;AAE1DI,MAAAA,WAAW,YAAKJ,OAAO,GAAG,CAAC,CAAhB;AAF+C,KAAxB,CAAb;AAAA,GAAvB;;AAIA,MAAMK,cAAc,GAAG,SAAjBA,cAAiB,CAACL,OAAD;AAAA,WAAaC,MAAM,CAACC,MAAP,CAAcJ,QAAd,EAAwB;AAC1DQ,MAAAA,MAAM,YAAKN,OAAL;AADoD,KAAxB,CAAb;AAAA,GAAvB;;AAGA,MAAMO,WAAW,GAAG;AAClBC,IAAAA,QAAQ,EAAE,kBAACR,OAAD,EAAa;AACrB,UAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC/BD,QAAAA,cAAc,CAACC,OAAD,CAAd;AACD;AACF,KALiB;AAMlBS,IAAAA,OAAO,EAAE,iBAACT,OAAD,EAAa;AACpB,UAAIU,KAAK,CAACD,OAAN,CAAcT,OAAd,KAA0BA,OAAO,CAACW,MAAtC,EAA8C;AAC5CJ,QAAAA,WAAW,CAACC,QAAZ,CAAqBR,OAAO,CAAC,CAAD,CAA5B;;AACA,YAAI,OAAOA,OAAO,CAAC,CAAD,CAAd,KAAsB,QAA1B,EAAoC;AAClCK,UAAAA,cAAc,CAACL,OAAO,CAAC,CAAD,CAAR,CAAd;AACD;;AACD,YAAIY,6BAAQ,CAACZ,OAAO,CAAC,CAAD,CAAR,CAAR,IAAwBA,OAAO,CAAC,CAAD,CAAP,CAAWH,WAAX,MAA4B,KAAK,CAA7D,EAAgE;AAC9DE,UAAAA,cAAc,CAACC,OAAO,CAAC,CAAD,CAAP,CAAWH,WAAX,CAAD,CAAd;AACD;;AACD,YAAIe,6BAAQ,CAACZ,OAAO,CAAC,CAAD,CAAR,CAAR,IAAwBA,OAAO,CAAC,CAAD,CAAP,CAAWH,WAAX,MAA4B,KAAK,CAA7D,EAAgE;AAC9DQ,UAAAA,cAAc,CAACL,OAAO,CAAC,CAAD,CAAP,CAAWH,WAAX,CAAD,CAAd;AACD;AACF;AACF,KAnBiB;AAoBlBe,IAAAA,QAAQ,EAAE,kBAACZ,OAAD,EAAa;AACrB,UAAIY,6BAAQ,CAACZ,OAAD,CAAR,IAAqBA,OAAO,CAACH,WAAD,CAAhC,EAA+C;AAC7C,YAAIa,KAAK,CAACD,OAAN,CAAcT,OAAd,KAA0BA,OAAO,CAACW,MAAtC,EAA8C;AAC5CZ,UAAAA,cAAc,CAACC,OAAO,CAACH,WAAD,CAAP,CAAqB,CAArB,CAAD,CAAd;AACAQ,UAAAA,cAAc,CAACL,OAAO,CAACH,WAAD,CAAP,CAAqB,CAArB,CAAD,CAAd;AACD,SAHD,MAGO;AACLE,UAAAA,cAAc,CAACC,OAAO,CAACH,WAAD,CAAR,CAAd;AACD;AACF;AACF;AA7BiB,GAApB;AA+BAI,EAAAA,MAAM,CAACY,IAAP,CAAYN,WAAZ,EAAyBO,OAAzB,CAAiC,UAACC,IAAD,EAAU;AACzCR,IAAAA,WAAW,CAACQ,IAAD,CAAX,CAAkBnB,MAAlB;AACD,GAFD;AAGA,SAAOE,QAAP;AACD;AACM,SAASkB,SAAT,CAAmBC,IAAnB,EAAyB;AAC9B,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,qBAAUA,IAAV,cAAkBA,IAAlB;AACD;;AACD,MAAI,2BAA2BC,IAA3B,CAAgCD,IAAhC,CAAJ,EAA2C;AACzC,yBAAcA,IAAd;AACD;;AACD,SAAOA,IAAP;AACD;AACM,SAASE,cAAT,CAAwBvB,MAAxB,EAAgCC,WAAhC,EAA6C;AAClD,MAAMuB,UAAU,GAAG,EAAnB;;AACA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACrB,OAAD;AAAA,WAAaC,MAAM,CAACC,MAAP,CAAckB,UAAd,EAA0B;AAC7DE,MAAAA,WAAW,YAAKtB,OAAO,GAAG,CAAf,OADkD;AAE7DuB,MAAAA,YAAY,YAAKvB,OAAO,GAAG,CAAf;AAFiD,KAA1B,CAAb;AAAA,GAAxB;;AAIA,MAAMO,WAAW,GAAG;AAClBC,IAAAA,QAAQ,EAAE,kBAACR,OAAD,EAAa;AACrB,UAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC/BqB,QAAAA,eAAe,CAACrB,OAAD,CAAf;AACD;AACF,KALiB;AAMlBS,IAAAA,OAAO,EAAE,iBAACT,OAAD,EAAa;AACpB,UAAIU,KAAK,CAACD,OAAN,CAAcT,OAAd,KAA0BA,OAAO,CAACW,MAAtC,EAA8C;AAC5C,YAAI,OAAOX,OAAO,CAAC,CAAD,CAAd,KAAsB,QAA1B,EAAoC;AAClCqB,UAAAA,eAAe,CAACrB,OAAO,CAAC,CAAD,CAAR,CAAf;AACD;;AACD,YAAIY,6BAAQ,CAACZ,OAAO,CAAC,CAAD,CAAR,CAAR,IAAwBA,OAAO,CAAC,CAAD,CAAP,CAAWH,WAAX,CAA5B,EAAqD;AACnDwB,UAAAA,eAAe,CAACrB,OAAO,CAAC,CAAD,CAAP,CAAWH,WAAX,CAAD,CAAf;AACD;AACF;AACF,KAfiB;AAgBlBe,IAAAA,QAAQ,EAAE,kBAACZ,OAAD,EAAa;AACrB,UAAIY,6BAAQ,CAACZ,OAAD,CAAR,IAAqBA,OAAO,CAACH,WAAD,CAAhC,EAA+C;AAC7CwB,QAAAA,eAAe,CAACrB,OAAO,CAACH,WAAD,CAAR,CAAf;AACD;AACF;AApBiB,GAApB;AAsBAI,EAAAA,MAAM,CAACY,IAAP,CAAYN,WAAZ,EAAyBO,OAAzB,CAAiC,UAACC,IAAD,EAAU;AACzCR,IAAAA,WAAW,CAACQ,IAAD,CAAX,CAAkBnB,MAAlB;AACD,GAFD;AAGA,SAAOwB,UAAP;AACD;AACM,SAASI,aAAT,CAAuBjC,IAAvB,EAA6BC,KAA7B,EAAoC;AAAA;;AACzC,MAAQiC,IAAR,GAA4CjC,KAA5C,CAAQiC,IAAR;AAAA,MAAcC,KAAd,GAA4ClC,KAA5C,CAAckC,KAAd;AAAA,MAAqBC,MAArB,GAA4CnC,KAA5C,CAAqBmC,MAArB;AAAA,MAA6BC,IAA7B,GAA4CpC,KAA5C,CAA6BoC,IAA7B;AAAA,MAAmCC,IAAnC,GAA4CrC,KAA5C,CAAmCqC,IAAnC;AACA,MAAMC,QAAQ,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,KAA/B,CAAjB;AACA,MAAMC,cAAc,GAAGD,QAAQ,CAACE,MAAT,CAAgB,UAACC,GAAD,EAAMC,QAAN,EAAmB;AAAA;;AACxD,QAAMC,QAAQ,GAAG3C,KAAK,CAAC0C,QAAD,CAAtB;AACA,QAAIE,UAAU,GAAG,EAAjB;;AACA,QAAI,OAAOD,QAAP,KAAoB,QAAxB,EAAkC;AAChCC,MAAAA,UAAU,CAACX,IAAX,GAAkBU,QAAlB;AACD,KAFD,MAEO,IAAIvB,6BAAQ,CAACuB,QAAD,CAAZ,EAAwB;AAC7BC,MAAAA,UAAU,GAAGD,QAAQ,IAAI,EAAzB;AACD;;AACD,2CACKF,GADL,2FAEM1C,IAFN,cAEc2C,QAFd,cAE0BE,UAAU,CAACX,IAFrC,GAE8CW,UAAU,CAACX,IAAX,KAAoB,KAAK,CAFvE,iEAGMlC,IAHN,cAGc2C,QAHd,oBAGgCE,UAAU,CAACV,KAH3C,GAGqDW,QAAQ,CAACD,UAAU,CAACV,KAAZ,EAAmB,EAAnB,CAAR,IAAkC,CAHvF,iEAIMnC,IAJN,cAIc2C,QAJd,qBAIiCE,UAAU,CAACT,MAJ5C,GAIuDU,QAAQ,CAACD,UAAU,CAACT,MAAZ,EAAoB,EAApB,CAAR,IAAmC,CAJ1F,iEAKMpC,IALN,cAKc2C,QALd,mBAK+BE,UAAU,CAACR,IAL1C,GAKmDS,QAAQ,CAACD,UAAU,CAACR,IAAZ,EAAkB,EAAlB,CAAR,IAAiC,CALpF,iEAMMrC,IANN,cAMc2C,QANd,mBAM+BE,UAAU,CAACP,IAN1C,GAMmDQ,QAAQ,CAACD,UAAU,CAACP,IAAZ,EAAkB,EAAlB,CAAR,IAAiC,CANpF;AAQD,GAhBsB,EAgBpB,EAhBoB,CAAvB;AAiBA,2GACMtC,IADN,GACe,IADf,iEAEMA,IAFN,cAEckC,IAFd,GAEuBA,IAAI,KAAK,KAAK,CAFrC,iEAGMlC,IAHN,oBAGoBmC,KAHpB,GAG8BA,KAH9B,iEAIMnC,IAJN,qBAIqBoC,MAJrB,GAIgCA,MAJhC,iEAKMpC,IALN,mBAKmBqC,IALnB,GAK4BA,IAL5B,iEAMMrC,IANN,mBAMmBsC,IANnB,GAM4BA,IAN5B,oBAOKE,cAPL;AASD;;;;;;;;;"}
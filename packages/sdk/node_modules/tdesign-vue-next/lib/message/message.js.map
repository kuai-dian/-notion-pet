{"version":3,"file":"message.js","sources":["../../src/message/message.tsx"],"sourcesContent":["import { defineComponent, h, ComponentPublicInstance } from 'vue';\nimport {\n  InfoCircleFilledIcon,\n  CheckCircleFilledIcon,\n  ErrorCircleFilledIcon,\n  HelpCircleFilledIcon,\n  CloseIcon,\n} from 'tdesign-icons-vue-next';\nimport TLoading from '../loading';\n\nimport { prefix } from '../config';\nimport { THEME_LIST } from './const';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport props from './props';\nimport { emitEvent } from '../utils/event';\n\nconst name = `${prefix}-message`;\n\nexport default defineComponent({\n  name: 'TMessage',\n\n  props: { ...props },\n\n  emits: ['duration-end', 'click-close-btn'],\n\n  data() {\n    return {\n      timer: null,\n    };\n  },\n\n  computed: {\n    classes(): Array<any> {\n      const status = {};\n      THEME_LIST.forEach((t) => {\n        status[`${prefix}-is-${t}`] = this.theme === t;\n      });\n      return [\n        name,\n        status,\n        {\n          [`${prefix}-is-closable`]: this.closeBtn || this.$slots.closeBtn,\n        },\n      ];\n    },\n  },\n\n  created() {\n    this.duration && this.setTimer();\n  },\n\n  methods: {\n    setTimer() {\n      if (!this.duration) {\n        return;\n      }\n      this.timer = Number(\n        setTimeout(() => {\n          this.clearTimer();\n          emitEvent(this, 'duration-end');\n        }, this.duration),\n      );\n    },\n    clearTimer() {\n      this.duration && clearTimeout(this.timer);\n    },\n    close(e?: MouseEvent) {\n      emitEvent(this, 'click-close-btn', e);\n    },\n    renderClose() {\n      const defaultClose = <CloseIcon />;\n      return (\n        <span class={`${name}__close`} onClick={this.close}>\n          {renderTNodeJSX(this as ComponentPublicInstance, 'closeBtn', defaultClose)}\n        </span>\n      );\n    },\n    renderIcon() {\n      if (this.icon === false) return;\n      if (typeof this.icon === 'function') return this.icon(h);\n      if (this.$slots.icon) {\n        return this.$slots.icon(null);\n      }\n      const Icon = {\n        info: InfoCircleFilledIcon,\n        success: CheckCircleFilledIcon,\n        warning: ErrorCircleFilledIcon,\n        error: ErrorCircleFilledIcon,\n        question: HelpCircleFilledIcon,\n        loading: TLoading,\n      }[this.theme];\n      return <Icon />;\n    },\n  },\n\n  render() {\n    return (\n      <div class={this.classes} onMouseenter={this.clearTimer} onMouseleave={this.setTimer}>\n        {this.renderIcon()}\n        {renderContent(this as ComponentPublicInstance, 'default', 'content')}\n        {this.renderClose()}\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","props","emits","data","timer","computed","classes","status","THEME_LIST","forEach","t","theme","closeBtn","$slots","created","duration","setTimer","methods","Number","setTimeout","clearTimer","emitEvent","clearTimeout","close","e","renderClose","defaultClose","renderTNodeJSX","renderIcon","icon","h","Icon","info","InfoCircleFilledIcon","success","CheckCircleFilledIcon","warning","ErrorCircleFilledIcon","error","question","HelpCircleFilledIcon","loading","TLoading","render","renderContent"],"mappings":"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"}
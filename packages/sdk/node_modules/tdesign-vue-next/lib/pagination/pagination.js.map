{"version":3,"file":"pagination.js","sources":["../../src/pagination/pagination.tsx"],"sourcesContent":["import { defineComponent } from 'vue';\nimport {\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  ChevronLeftDoubleIcon,\n  ChevronRightDoubleIcon,\n  EllipsisIcon,\n} from 'tdesign-icons-vue-next';\nimport config from '../config';\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { PaginationConfig } from '../config-provider/config-receiver';\nimport TInputNumber from '../input-number';\nimport { Select, Option } from '../select';\nimport CLASSNAMES from '../utils/classnames';\nimport props from './props';\nimport { TdPaginationProps } from './type';\nimport { ClassName } from '../common';\nimport { renderTNodeJSX } from '../utils/render-tnode';\nimport { emitEvent } from '../utils/event';\n\nconst { prefix } = config;\n\nconst name = `${prefix}-pagination`;\nconst min = 1;\n\nconst PaginationLocalReceiver = getConfigReceiverMixins<PaginationConfig>('pagination');\n\nexport default defineComponent({\n  name: 'TPagination',\n  components: {\n    ChevronLeftIcon,\n    ChevronRightIcon,\n    ChevronLeftDoubleIcon,\n    ChevronRightDoubleIcon,\n    EllipsisIcon,\n    TInputNumber,\n    TSelect: Select,\n    TOption: Option,\n  },\n  ...mixins(PaginationLocalReceiver),\n  props: {\n    ...props,\n    /**\n     * 当前页\n     */\n    current: {\n      type: Number,\n      default: 1,\n      validator(v: number): boolean {\n        return v > 0;\n      },\n    },\n    /**\n     * 分页大小\n     */\n    pageSize: {\n      type: Number,\n      default: 10,\n      validator(v: number): boolean {\n        return v > 0;\n      },\n    },\n  },\n  emits: ['change', 'update:current', 'update:pageSize', 'page-size-change', 'current-change'],\n  data() {\n    return {\n      prevMore: false,\n      nextMore: false,\n      jumpIndex: this.current,\n    };\n  },\n\n  computed: {\n    /**\n     * 样式计算\n     */\n    paginationClass(): ClassName {\n      return [\n        `${name}`,\n        CLASSNAMES.SIZE[this.size],\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled,\n        },\n      ];\n    },\n    totalClass(): ClassName {\n      return [`${name}__total`];\n    },\n    sizerClass(): ClassName {\n      return [`${name}__select`];\n    },\n    preBtnClass(): ClassName {\n      return [\n        `${name}__btn`,\n        `${name}__btn-prev`,\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled || this.current === 1,\n        },\n      ];\n    },\n    nextBtnClass(): ClassName {\n      return [\n        `${name}__btn`,\n        `${name}__btn-next`,\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled || this.current === this.pageCount,\n        },\n      ];\n    },\n    btnWrapClass(): ClassName {\n      return [`${name}__pager`];\n    },\n    btnMoreClass(): ClassName {\n      return [\n        `${name}__number`,\n        `${name}__number--more`,\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled,\n        },\n      ];\n    },\n    jumperClass(): ClassName {\n      return [`${name}__jump`];\n    },\n    jumperInputClass(): ClassName {\n      return [`${name}__input`];\n    },\n    simpleClass(): ClassName {\n      return [`${name}__select`];\n    },\n    isSimple(): boolean {\n      return this.theme === 'simple';\n    },\n    pageCount(): number {\n      const c: number = Math.ceil(this.total / this.pageSize);\n      return c > 0 ? c : 1;\n    },\n    pageCountOption(): Array<{ label: string; value: number }> {\n      const ans = [];\n      for (let i = 1; i <= this.pageCount; i++) {\n        ans.push({ value: i, label: `${i}/${this.pageCount}` });\n      }\n      return ans;\n    },\n    sizeOptions(): Array<{ label: string; value: number }> {\n      const pageSizeOptions = this.pageSizeOptions as TdPaginationProps['pageSizeOptions'];\n      const options = pageSizeOptions.map((option) =>\n        typeof option === 'object'\n          ? option\n          : {\n              label: this.t(this.global.itemsPerPage, { size: option }),\n              value: Number(option),\n            },\n      );\n      return options.sort((a, b) => a.value - b.value);\n    },\n\n    curPageLeftCount(): number {\n      return Math.ceil((this.foldedMaxPageBtn - 1) / 2);\n    },\n\n    curPageRightCount(): number {\n      return Math.ceil((this.foldedMaxPageBtn - 1) / 2);\n    },\n\n    isPrevMoreShow(): boolean {\n      return 2 + this.curPageLeftCount < this.current;\n    },\n\n    isNextMoreShow(): boolean {\n      return this.pageCount - 1 - this.curPageRightCount > this.current;\n    },\n\n    pages(): Array<number> {\n      const array = [];\n      let start;\n      let end;\n\n      if (this.isFolded) {\n        if (this.isPrevMoreShow && this.isNextMoreShow) {\n          start = this.current - this.curPageLeftCount;\n          end = this.current + this.curPageRightCount;\n        } else {\n          start = this.isPrevMoreShow ? this.pageCount - this.foldedMaxPageBtn + 1 : 2;\n          end = this.isPrevMoreShow ? this.pageCount - 1 : this.foldedMaxPageBtn;\n        }\n      } else {\n        start = 1;\n        end = this.pageCount;\n      }\n\n      for (let i = start; i <= end; i++) {\n        array.push(i);\n      }\n      return array;\n    },\n\n    isFolded(): boolean {\n      return this.pageCount > this.maxPageBtn;\n    },\n  },\n  watch: {\n    current(val) {\n      this.jumpIndex = val;\n    },\n  },\n  methods: {\n    toPage(pageIndex: number, isTriggerChange?: boolean): void {\n      if (this.disabled) {\n        return;\n      }\n      let current = pageIndex;\n      if (pageIndex < min) {\n        current = min;\n      } else if (pageIndex > this.pageCount) {\n        current = this.pageCount;\n      }\n      if (this.current !== current) {\n        const prev = this.current;\n        const pageInfo = {\n          current,\n          previous: prev,\n          pageSize: this.pageSize,\n        };\n        if (isTriggerChange !== false) {\n          emitEvent(this, 'change', pageInfo);\n        }\n        this.$emit('update:current', current);\n        emitEvent(this, 'current-change', current, pageInfo);\n      }\n    },\n    prevPage(): void {\n      this.toPage(this.current - 1);\n    },\n    nextPage(): void {\n      this.toPage(this.current + 1);\n    },\n    prevMorePage(): void {\n      this.toPage(this.current - this.foldedMaxPageBtn);\n    },\n    nextMorePage(): void {\n      this.toPage(this.current + this.foldedMaxPageBtn);\n    },\n    getButtonClass(index: number): ClassName {\n      return [\n        `${name}__number`,\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled,\n          [CLASSNAMES.STATUS.current]: this.current === index,\n        },\n      ];\n    },\n    onSelectorChange(e: string): void {\n      if (this.disabled) {\n        return;\n      }\n      const pageSize: number = parseInt(e, 10);\n      let pageCount = 1;\n      if (pageSize > 0) {\n        pageCount = Math.ceil(this.total / pageSize);\n      }\n\n      let isIndexChange = false;\n\n      if (this.current > pageCount) {\n        isIndexChange = true;\n      }\n\n      /**\n       * 分页大小变化事件\n       * @param {Number} pageSize 分页大小\n       * @param {Number} index 当前页\n       */\n      const pageInfo = {\n        current: isIndexChange ? pageCount : this.current,\n        previous: this.current,\n        pageSize,\n      };\n      emitEvent(this, 'page-size-change', pageSize, pageInfo);\n      emitEvent(this, 'change', pageInfo);\n      if (isIndexChange) {\n        this.toPage(pageCount, false);\n      }\n    },\n    renderTotalContent() {\n      const { locale, total, t } = this;\n      if (this.$slots.totalContent) {\n        return this.$slots.totalContent(null);\n      }\n      if (typeof this.totalContent === 'function') {\n        return this.totalContent();\n      }\n      return t(locale.total, { total });\n    },\n    // 自定义页码时，相当于 current 发生变化\n    onJumperChange(val: String) {\n      const currentIndex = Number(val);\n      if (isNaN(currentIndex)) return;\n      this.toPage(currentIndex);\n    },\n    renderPagination() {\n      return (\n        <div class={this.paginationClass}>\n          {/* 数据统计区 */}\n          {renderTNodeJSX(\n            this,\n            'totalContent',\n            <div class={this.totalClass}>{this.t(this.global.total, { total: this.total })}</div>,\n          )}\n\n          {/* select */}\n          {this.pageSizeOptions.length > 0 && (\n            <t-select\n              size={this.size}\n              value={this.pageSize}\n              disabled={this.disabled}\n              class={this.sizerClass}\n              onChange={this.onSelectorChange}\n            >\n              {this.sizeOptions.map((item, index) => (\n                <t-option value={item.value} label={item.label} key={index} />\n              ))}\n            </t-select>\n          )}\n\n          {/* 向前按钮 */}\n          <div class={this.preBtnClass} onClick={this.prevPage} disabled={this.disabled || this.current === min}>\n            <chevron-left-icon />\n          </div>\n          {/* 页数 */}\n          {!this.isSimple ? (\n            <ul class={this.btnWrapClass}>\n              {this.isFolded && (\n                <li class={this.getButtonClass(1)} onClick={() => this.toPage(min)}>\n                  {min}\n                </li>\n              )}\n              {this.isFolded && this.isPrevMoreShow ? (\n                <li\n                  class={this.btnMoreClass}\n                  onClick={this.prevMorePage}\n                  onMouseover={() => (this.prevMore = true)}\n                  onMouseout={() => (this.prevMore = false)}\n                >\n                  {this.prevMore ? <chevron-left-double-icon /> : <ellipsis-icon />}\n                </li>\n              ) : null}\n              {this.pages.map((i) => (\n                <li class={this.getButtonClass(i)} key={i} onClick={() => this.toPage(i)}>\n                  {i}\n                </li>\n              ))}\n              {this.isFolded && this.isNextMoreShow ? (\n                <li\n                  class={this.btnMoreClass}\n                  onClick={this.nextMorePage}\n                  onMouseover={() => (this.nextMore = true)}\n                  onMouseout={() => (this.nextMore = false)}\n                >\n                  {this.nextMore ? <chevron-right-double-icon /> : <ellipsis-icon />}\n                </li>\n              ) : null}\n              {this.isFolded ? (\n                <li class={this.getButtonClass(this.pageCount)} onClick={() => this.toPage(this.pageCount)}>\n                  {this.pageCount}\n                </li>\n              ) : null}\n            </ul>\n          ) : (\n            <t-select\n              size={this.size}\n              value={this.current}\n              disabled={this.disabled}\n              class={this.simpleClass}\n              onChange={this.toPage}\n              options={this.pageCountOption}\n            />\n          )}\n          {/* 向后按钮 */}\n          <div\n            class={this.nextBtnClass}\n            onClick={this.nextPage}\n            disabled={this.disabled || this.current === this.pageCount}\n          >\n            <chevron-right-icon />\n          </div>\n          {/* 跳转 */}\n          {/* 跳转 */}\n          {this.showJumper ? (\n            <div class={this.jumperClass}>\n              {this.t(this.global.jumpTo)}\n              <t-input-number\n                class={this.jumperInputClass}\n                v-model={this.jumpIndex}\n                onBlur={this.onJumperChange}\n                onEnter={this.onJumperChange}\n                max={this.pageCount}\n                min={min}\n                theme=\"normal\"\n              />\n              {this.t(this.global.page)}\n            </div>\n          ) : null}\n        </div>\n      );\n    },\n  },\n  render() {\n    const { pageCount } = this;\n    return pageCount >= 1 && this.renderPagination();\n  },\n});\n"],"names":["prefix","config","name","min","PaginationLocalReceiver","getConfigReceiverMixins","defineComponent","components","ChevronLeftIcon","ChevronRightIcon","ChevronLeftDoubleIcon","ChevronRightDoubleIcon","EllipsisIcon","TInputNumber","TSelect","Select","TOption","Option","mixins","props","current","type","Number","validator","v","pageSize","emits","data","prevMore","nextMore","jumpIndex","computed","paginationClass","CLASSNAMES","SIZE","size","STATUS","disabled","totalClass","sizerClass","preBtnClass","nextBtnClass","pageCount","btnWrapClass","btnMoreClass","jumperClass","jumperInputClass","simpleClass","isSimple","theme","c","Math","ceil","total","pageCountOption","ans","i","push","value","label","sizeOptions","pageSizeOptions","options","map","option","_typeof","t","global","itemsPerPage","sort","a","b","curPageLeftCount","foldedMaxPageBtn","curPageRightCount","isPrevMoreShow","isNextMoreShow","pages","array","start","end","isFolded","maxPageBtn","watch","val","methods","toPage","pageIndex","isTriggerChange","prev","pageInfo","previous","emitEvent","$emit","prevPage","nextPage","prevMorePage","nextMorePage","getButtonClass","index","onSelectorChange","e","parseInt","isIndexChange","renderTotalContent","locale","$slots","totalContent","onJumperChange","currentIndex","isNaN","renderPagination","renderTNodeJSX","length","item","showJumper","jumpTo","page","render"],"mappings":"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"}
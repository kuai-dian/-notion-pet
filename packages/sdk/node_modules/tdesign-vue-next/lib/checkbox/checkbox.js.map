{"version":3,"file":"checkbox.js","sources":["../../src/checkbox/checkbox.tsx"],"sourcesContent":["import { defineComponent } from 'vue';\nimport { renderContent } from '../utils/render-tnode';\nimport { prefix } from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport checkboxProps from './props';\nimport { ClassName } from '../common';\nimport { emitEvent } from '../utils/event';\nimport { TdCheckboxProps } from './type';\n\nconst name = `${prefix}-checkbox`;\n\nexport default defineComponent({\n  name: 'TCheckbox',\n  inject: {\n    checkboxGroup: { default: undefined },\n  },\n  inheritAttrs: false,\n  props: { ...checkboxProps },\n  emits: ['change', 'checked-change'],\n  computed: {\n    labelClasses(): ClassName {\n      const { class: className } = this.$attrs;\n      return [\n        `${name}`,\n        `${className}`,\n        {\n          [CLASSNAMES.STATUS.checked]: this.checked$,\n          [CLASSNAMES.STATUS.disabled]: this.disabled$,\n          [CLASSNAMES.STATUS.indeterminate]: this.indeterminate$,\n        },\n      ];\n    },\n    disabled$(): boolean {\n      if (!this.checkAll && !this.checked$ && this.checkboxGroup?.maxExceeded) {\n        return true;\n      }\n      if (this.disabled !== undefined) return this.disabled;\n      return !!this.checkboxGroup?.disabled;\n    },\n    name$(): string {\n      return this.name || this.checkboxGroup?.name;\n    },\n    checked$(): boolean {\n      if (this.checkAll) return this.checkboxGroup?.isCheckAll;\n      return this.checkboxGroup ? !!this.checkboxGroup.checkedMap[this.value] : this.checked;\n    },\n    indeterminate$(): boolean {\n      if (this.checkAll) return this.checkboxGroup?.indeterminate;\n      return this.indeterminate;\n    },\n  },\n\n  methods: {\n    handleChange(e: Event) {\n      const value = !this.checked$;\n      emitEvent<Parameters<TdCheckboxProps['onChange']>>(this, 'change', value, { e });\n      e.stopPropagation();\n      if (this.checkboxGroup && this.checkboxGroup.handleCheckboxChange && !this.isCheckAllOption) {\n        this.checkboxGroup.onCheckedChange({ checked: value, checkAll: this.checkAll, e, option: this.$props });\n      }\n    },\n  },\n\n  render() {\n    return (\n      <label class={this.labelClasses} {...this.$attrs}>\n        <input\n          type=\"checkbox\"\n          class={`${name}__former`}\n          disabled={this.disabled$}\n          readonly={this.readonly}\n          indeterminate={this.indeterminate}\n          name={this.name$}\n          value={this.value}\n          checked={this.checked$}\n          onChange={this.handleChange}\n        ></input>\n        <span class={`${name}__input`}></span>\n        <span class={`${name}__label`}>{renderContent(this, 'default', 'label')}</span>\n      </label>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","inject","checkboxGroup","inheritAttrs","props","checkboxProps","emits","computed","labelClasses","className","$attrs","CLASSNAMES","STATUS","checked","checked$","disabled","disabled$","indeterminate","indeterminate$","checkAll","maxExceeded","name$","isCheckAll","checkedMap","value","methods","handleChange","e","emitEvent","stopPropagation","handleCheckboxChange","isCheckAllOption","onCheckedChange","option","$props","render","readonly","renderContent"],"mappings":"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"}
{"version":3,"file":"switch.js","sources":["../../src/switch/switch.tsx"],"sourcesContent":["import { defineComponent, h, VNodeChild } from 'vue';\nimport { prefix } from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport TLoading from '../loading';\nimport { SwitchValue } from './type';\nimport props from './props';\nimport { ClassName, TNodeReturnValue } from '../common';\nimport { emitEvent } from '../utils/event';\n\nconst name = `${prefix}-switch`;\n\nexport default defineComponent({\n  name: 'TSwitch',\n  props: { ...props },\n  emits: ['change'],\n  computed: {\n    classes(): ClassName {\n      return [\n        `${name}`,\n        CLASSNAMES.SIZE[this.size],\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled,\n          [CLASSNAMES.STATUS.loading]: this.loading,\n          [CLASSNAMES.STATUS.checked]: this.value === this.activeValue,\n        },\n      ];\n    },\n    nodeClasses(): ClassName {\n      return [\n        `${name}__handle`,\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled,\n          [CLASSNAMES.STATUS.loading]: this.loading,\n        },\n      ];\n    },\n    contentClasses(): ClassName {\n      return [\n        `${name}__content`,\n        CLASSNAMES.SIZE[this.size],\n        {\n          [CLASSNAMES.STATUS.disabled]: this.disabled,\n        },\n      ];\n    },\n    activeValue(): SwitchValue {\n      if (this.customValue && this.customValue.length > 0) {\n        return this.customValue[0];\n      }\n      return true;\n    },\n    inactiveValue(): SwitchValue {\n      if (this.customValue && this.customValue.length > 1) {\n        return this.customValue[1];\n      }\n      return false;\n    },\n    content(): VNodeChild {\n      if (typeof this.label === 'function') {\n        return this.label(h, { value: this.value });\n      }\n      if (typeof this.label === 'string') {\n        return this.label;\n      }\n      if (Array.isArray(this.label)) {\n        const label = this.value === this.activeValue ? this.label[0] : this.label[1];\n        if (!label) return;\n        if (typeof label === 'string') {\n          return label;\n        }\n        if (typeof label === 'function') {\n          return label(h);\n        }\n      }\n      if (this.$slots.label) {\n        return this.$slots.label({ value: this.value });\n      }\n      return null;\n    },\n  },\n  watch: {\n    value: {\n      handler(val: SwitchValue): void {\n        if (this.customValue && this.customValue.length && !this.customValue.includes(val)) {\n          throw new Error(`value is not in ${JSON.stringify(this.customValue)}`);\n        }\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    handleToggle(): void {\n      const checked = this.value === this.activeValue ? this.inactiveValue : this.activeValue;\n      emitEvent(this, 'change', checked);\n    },\n    toggle(): void {\n      if (this.disabled || this.loading) {\n        return;\n      }\n      this.handleToggle();\n    },\n  },\n  render() {\n    const { loading, disabled, content, nodeClasses, classes, toggle, contentClasses } = this;\n\n    let switchContent: VNodeChild;\n    let loadingContent: TNodeReturnValue;\n\n    if (loading) {\n      loadingContent = <TLoading size=\"small\" />;\n    } else if (content) {\n      switchContent = content;\n    }\n\n    return (\n      <div class={classes} disabled={disabled} onClick={toggle}>\n        <span class={nodeClasses}>{loadingContent}</span>\n        <div class={contentClasses}>{switchContent}</div>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","defineComponent","props","emits","computed","classes","CLASSNAMES","SIZE","size","STATUS","disabled","loading","checked","value","activeValue","nodeClasses","contentClasses","customValue","length","inactiveValue","content","label","h","Array","isArray","$slots","watch","handler","val","includes","Error","JSON","stringify","immediate","methods","handleToggle","emitEvent","toggle","render","switchContent","loadingContent"],"mappings":"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"}
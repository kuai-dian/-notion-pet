{"version":3,"file":"popup.js","sources":["../../node_modules/css-element-queries/src/ResizeSensor.js","../../src/popup/popup.tsx"],"sourcesContent":["'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n        root.ResizeSensor = factory();\n    }\n}(typeof window !== 'undefined' ? window : this, function () {\n\n    // Make sure it does not throw in a SSR (Server Side Rendering) situation\n    if (typeof window === \"undefined\") {\n        return null;\n    }\n    // https://github.com/Semantic-Org/Semantic-UI/issues/3855\n    // https://github.com/marcj/css-element-queries/issues/257\n    var globalWindow = typeof window != 'undefined' && window.Math == Math\n        ? window\n        : typeof self != 'undefined' && self.Math == Math\n            ? self\n            : Function('return this')();\n    // Only used for the dirty checking, so the event callback count is limited to max 1 call per fps per sensor.\n    // In combination with the event based resize sensor this saves cpu time, because the sensor is too fast and\n    // would generate too many unnecessary events.\n    var requestAnimationFrame = globalWindow.requestAnimationFrame ||\n        globalWindow.mozRequestAnimationFrame ||\n        globalWindow.webkitRequestAnimationFrame ||\n        function (fn) {\n            return globalWindow.setTimeout(fn, 20);\n        };\n\n    var cancelAnimationFrame = globalWindow.cancelAnimationFrame ||\n        globalWindow.mozCancelAnimationFrame ||\n        globalWindow.webkitCancelAnimationFrame ||\n        function (timer) {\n            globalWindow.clearTimeout(timer);\n        };\n\n    /**\n     * Iterate over each of the provided element(s).\n     *\n     * @param {HTMLElement|HTMLElement[]} elements\n     * @param {Function}                  callback\n     */\n    function forEachElement(elements, callback){\n        var elementsType = Object.prototype.toString.call(elements);\n        var isCollectionTyped = ('[object Array]' === elementsType\n            || ('[object NodeList]' === elementsType)\n            || ('[object HTMLCollection]' === elementsType)\n            || ('[object Object]' === elementsType)\n            || ('undefined' !== typeof jQuery && elements instanceof jQuery) //jquery\n            || ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\n        );\n        var i = 0, j = elements.length;\n        if (isCollectionTyped) {\n            for (; i < j; i++) {\n                callback(elements[i]);\n            }\n        } else {\n            callback(elements);\n        }\n    }\n\n    /**\n    * Get element size\n    * @param {HTMLElement} element\n    * @returns {Object} {width, height}\n    */\n    function getElementSize(element) {\n        if (!element.getBoundingClientRect) {\n            return {\n                width: element.offsetWidth,\n                height: element.offsetHeight\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n        return {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height)\n        }\n    }\n\n    /**\n     * Apply CSS styles to element.\n     *\n     * @param {HTMLElement} element\n     * @param {Object} style\n     */\n    function setStyle(element, style) {\n        Object.keys(style).forEach(function(key) {\n            element.style[key] = style[key];\n        });\n    }\n\n    /**\n     * Class for dimension change detection.\n     *\n     * @param {Element|Element[]|Elements|jQuery} element\n     * @param {Function} callback\n     *\n     * @constructor\n     */\n    var ResizeSensor = function(element, callback) {\n        //Is used when checking in reset() only for invisible elements\n        var lastAnimationFrameForInvisibleCheck = 0;\n\n        /**\n         *\n         * @constructor\n         */\n        function EventQueue() {\n            var q = [];\n            this.add = function(ev) {\n                q.push(ev);\n            };\n\n            var i, j;\n            this.call = function(sizeInfo) {\n                for (i = 0, j = q.length; i < j; i++) {\n                    q[i].call(this, sizeInfo);\n                }\n            };\n\n            this.remove = function(ev) {\n                var newQueue = [];\n                for(i = 0, j = q.length; i < j; i++) {\n                    if(q[i] !== ev) newQueue.push(q[i]);\n                }\n                q = newQueue;\n            };\n\n            this.length = function() {\n                return q.length;\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {Function}    resized\n         */\n        function attachResizeEvent(element, resized) {\n            if (!element) return;\n            if (element.resizedAttached) {\n                element.resizedAttached.add(resized);\n                return;\n            }\n\n            element.resizedAttached = new EventQueue();\n            element.resizedAttached.add(resized);\n\n            element.resizeSensor = document.createElement('div');\n            element.resizeSensor.dir = 'ltr';\n            element.resizeSensor.className = 'resize-sensor';\n\n            var style = {\n                pointerEvents: 'none',\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                overflow: 'hidden',\n                zIndex: '-1',\n                visibility: 'hidden',\n                maxWidth: '100%'\n            };\n            var styleChild = {\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                transition: '0s',\n            };\n\n            setStyle(element.resizeSensor, style);\n\n            var expand = document.createElement('div');\n            expand.className = 'resize-sensor-expand';\n            setStyle(expand, style);\n\n            var expandChild = document.createElement('div');\n            setStyle(expandChild, styleChild);\n            expand.appendChild(expandChild);\n\n            var shrink = document.createElement('div');\n            shrink.className = 'resize-sensor-shrink';\n            setStyle(shrink, style);\n\n            var shrinkChild = document.createElement('div');\n            setStyle(shrinkChild, styleChild);\n            setStyle(shrinkChild, { width: '200%', height: '200%' });\n            shrink.appendChild(shrinkChild);\n\n            element.resizeSensor.appendChild(expand);\n            element.resizeSensor.appendChild(shrink);\n            element.appendChild(element.resizeSensor);\n\n            var computedStyle = window.getComputedStyle(element);\n            var position = computedStyle ? computedStyle.getPropertyValue('position') : null;\n            if ('absolute' !== position && 'relative' !== position && 'fixed' !== position && 'sticky' !== position) {\n                element.style.position = 'relative';\n            }\n\n            var dirty = false;\n\n            //last request animation frame id used in onscroll event\n            var rafId = 0;\n            var size = getElementSize(element);\n            var lastWidth = 0;\n            var lastHeight = 0;\n            var initialHiddenCheck = true;\n            lastAnimationFrameForInvisibleCheck = 0;\n\n            var resetExpandShrink = function () {\n                var width = element.offsetWidth;\n                var height = element.offsetHeight;\n\n                expandChild.style.width = (width + 10) + 'px';\n                expandChild.style.height = (height + 10) + 'px';\n\n                expand.scrollLeft = width + 10;\n                expand.scrollTop = height + 10;\n\n                shrink.scrollLeft = width + 10;\n                shrink.scrollTop = height + 10;\n            };\n\n            var reset = function() {\n                // Check if element is hidden\n                if (initialHiddenCheck) {\n                    var invisible = element.offsetWidth === 0 && element.offsetHeight === 0;\n                    if (invisible) {\n                        // Check in next frame\n                        if (!lastAnimationFrameForInvisibleCheck){\n                            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                                lastAnimationFrameForInvisibleCheck = 0;\n                                reset();\n                            });\n                        }\n\n                        return;\n                    } else {\n                        // Stop checking\n                        initialHiddenCheck = false;\n                    }\n                }\n\n                resetExpandShrink();\n            };\n            element.resizeSensor.resetSensor = reset;\n\n            var onResized = function() {\n                rafId = 0;\n\n                if (!dirty) return;\n\n                lastWidth = size.width;\n                lastHeight = size.height;\n\n                if (element.resizedAttached) {\n                    element.resizedAttached.call(size);\n                }\n            };\n\n            var onScroll = function() {\n                size = getElementSize(element);\n                dirty = size.width !== lastWidth || size.height !== lastHeight;\n\n                if (dirty && !rafId) {\n                    rafId = requestAnimationFrame(onResized);\n                }\n\n                reset();\n            };\n\n            var addEvent = function(el, name, cb) {\n                if (el.attachEvent) {\n                    el.attachEvent('on' + name, cb);\n                } else {\n                    el.addEventListener(name, cb);\n                }\n            };\n\n            addEvent(expand, 'scroll', onScroll);\n            addEvent(shrink, 'scroll', onScroll);\n\n            // Fix for custom Elements and invisible elements\n            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                lastAnimationFrameForInvisibleCheck = 0;\n                reset();\n            });\n        }\n\n        forEachElement(element, function(elem){\n            attachResizeEvent(elem, callback);\n        });\n\n        this.detach = function(ev) {\n            // clean up the unfinished animation frame to prevent a potential endless requestAnimationFrame of reset\n            if (!lastAnimationFrameForInvisibleCheck) {\n                cancelAnimationFrame(lastAnimationFrameForInvisibleCheck);\n                lastAnimationFrameForInvisibleCheck = 0;\n            }\n            ResizeSensor.detach(element, ev);\n        };\n\n        this.reset = function() {\n            element.resizeSensor.resetSensor();\n        };\n    };\n\n    ResizeSensor.reset = function(element) {\n        forEachElement(element, function(elem){\n            elem.resizeSensor.resetSensor();\n        });\n    };\n\n    ResizeSensor.detach = function(element, ev) {\n        forEachElement(element, function(elem){\n            if (!elem) return;\n            if(elem.resizedAttached && typeof ev === \"function\"){\n                elem.resizedAttached.remove(ev);\n                if(elem.resizedAttached.length()) return;\n            }\n            if (elem.resizeSensor) {\n                if (elem.contains(elem.resizeSensor)) {\n                    elem.removeChild(elem.resizeSensor);\n                }\n                delete elem.resizeSensor;\n                delete elem.resizedAttached;\n            }\n        });\n    };\n\n    if (typeof MutationObserver !== \"undefined\") {\n        var observer = new MutationObserver(function (mutations) {\n            for (var i in mutations) {\n                if (mutations.hasOwnProperty(i)) {\n                    var items = mutations[i].addedNodes;\n                    for (var j = 0; j < items.length; j++) {\n                        if (items[j].resizeSensor) {\n                            ResizeSensor.reset(items[j]);\n                        }\n                    }\n                }\n            }\n        });\n\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true,\n            });\n        });\n    }\n\n    return ResizeSensor;\n\n}));\n","import { defineComponent, Transition } from 'vue';\nimport { createPopper, Placement } from '@popperjs/core';\nimport ResizeSensor from 'css-element-queries/src/ResizeSensor';\nimport config from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport { on, off, once, getAttach } from '../utils/dom';\nimport props from './props';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport { PopupVisibleChangeContext } from './type';\nimport { ClassName, Styles } from '../common';\nimport setStyle from '../utils/set-style';\nimport { emitEvent } from '../utils/event';\n\nconst { prefix } = config;\n\nconst stop = (e: MouseEvent) => e.stopPropagation();\nconst name = `${prefix}-popup`;\nconst placementMap = {\n  top: 'top',\n  'top-left': 'top-start',\n  'top-right': 'top-end',\n  bottom: 'bottom',\n  'bottom-left': 'bottom-start',\n  'bottom-right': 'bottom-end',\n  left: 'left',\n  'left-top': 'left-start',\n  'left-bottom': 'left-end',\n  right: 'right',\n  'right-top': 'right-start',\n  'right-bottom': 'right-end',\n};\n\nconst showTimeout = 250;\nconst hideTimeout = 150;\nconst triggers = ['click', 'hover', 'focus', 'context-menu'] as const;\n\nexport default defineComponent({\n  name: 'TPopup',\n\n  components: {\n    Transition,\n  },\n\n  provide(this: any) {\n    return {\n      popup: this,\n    };\n  },\n\n  inject: {\n    popup: {\n      default: undefined,\n    },\n  },\n\n  props: {\n    ...props,\n    expandAnimation: {\n      type: Boolean,\n    },\n  },\n\n  emits: ['visible-change'],\n\n  data() {\n    return {\n      name,\n      currentPlacement: '',\n      popperElm: null,\n      referenceElm: null,\n      resizeSensor: null,\n      popper: null,\n      timeout: null,\n      refOverlayElm: null,\n      hasDocumentEvent: false,\n      offEvents: [],\n    };\n  },\n  computed: {\n    overlayClasses(): ClassName {\n      const base = [\n        `${name}__content`,\n        {\n          [`${name}__content--arrow`]: this.showArrow,\n          [CLASSNAMES.STATUS.disabled]: this.disabled,\n        },\n      ] as ClassName;\n      return base.concat(this.overlayClassName);\n    },\n    hasTrigger(): Record<typeof triggers[number], boolean> {\n      return triggers.reduce(\n        (map, trigger) => ({\n          ...map,\n          [trigger]: this.trigger.includes(trigger),\n        }),\n        {} as any,\n      );\n    },\n  },\n  watch: {\n    visible(val) {\n      if (val) {\n        this.updatePopper();\n        if (!this.hasDocumentEvent && (this.hasTrigger['context-menu'] || this.hasTrigger.click)) {\n          on(document, 'mousedown', this.handleDocumentClick);\n          this.hasDocumentEvent = true;\n        }\n        // focus trigger esc 隐藏浮层\n        if (this.referenceElm && this.hasTrigger.focus) {\n          once(this.referenceElm, 'keydown', (ev: KeyboardEvent) => {\n            if (ev.code === 'Escape') {\n              this.handleClose({ trigger: 'keydown-esc' });\n            }\n          });\n        }\n      } else {\n        off(document, 'mousedown', this.handleDocumentClick);\n        this.hasDocumentEvent = false;\n      }\n    },\n    overlayStyle() {\n      if (this.popper) {\n        this.popper.update();\n        this.updateOverlayStyle();\n      }\n    },\n  },\n  mounted() {\n    if (typeof this.content === 'string') {\n      // set 480px max width when the content type is string\n      this.setOverlayStyle({ maxWidth: '480px' });\n    }\n\n    this.referenceElm = this.referenceElm || this.$el;\n\n    if (!this.referenceElm || !this.$refs.popper) return;\n\n    if (this.visible) {\n      this.createPopper();\n      this.updateOverlayStyle();\n    }\n\n    const reference = this.referenceElm;\n    const popperElm = this.$refs.popper as HTMLElement;\n\n    const offEvents: (() => void)[] = [];\n\n    if (this.hasTrigger.click) {\n      offEvents.push(\n        on(reference, 'click', (e: MouseEvent) => this.handleToggle({ e, trigger: 'trigger-element-click' })),\n      );\n    }\n\n    if (this.hasTrigger.hover) {\n      offEvents.push(on(reference, 'mouseenter', () => this.handleOpen({ trigger: 'trigger-element-hover' })));\n      offEvents.push(on(reference, 'mouseleave', () => this.handleClose({ trigger: 'trigger-element-hover' })));\n      offEvents.push(on(popperElm, 'mouseenter', () => this.handleOpen({ trigger: 'trigger-element-hover' }, true)));\n      offEvents.push(\n        on(popperElm, 'mouseleave', (ev: MouseEvent) => {\n          const parent = (this as any).popup;\n          let closeParent: boolean;\n          if (parent?.visible) {\n            const parentRect = parent.$refs.popper.getBoundingClientRect();\n            // close parent if mouse isn't inside\n            closeParent = !(\n              ev.x > parentRect.left &&\n              ev.x < parentRect.right &&\n              ev.y > parentRect.top &&\n              ev.y < parentRect.bottom\n            );\n          }\n          this.handleClose({ trigger: 'trigger-element-hover' }, closeParent);\n        }),\n      );\n    }\n\n    if (this.hasTrigger.focus) {\n      if (reference.querySelector('input,textarea')) {\n        offEvents.push(on(reference, 'focusin', () => this.handleOpen({ trigger: 'trigger-element-focus' })));\n        offEvents.push(on(reference, 'focusout', () => this.handleClose({ trigger: 'trigger-element-blur' })));\n      } else {\n        offEvents.push(on(reference, 'mousedown', () => this.handleOpen({ trigger: 'trigger-element-click' })));\n        offEvents.push(on(reference, 'mouseup', () => this.handleClose({ trigger: 'trigger-element-click' })));\n      }\n    }\n    if (this.hasTrigger['context-menu']) {\n      reference.oncontextmenu = () => false;\n      offEvents.push(\n        on(reference, 'mousedown', (e: MouseEvent) => {\n          // MouseEvent.button\n          // 2: Secondary button pressed, usually the right button\n          e.button === 2 && this.handleToggle({ trigger: 'context-menu' });\n        }),\n      );\n    }\n    this.offEvents = offEvents;\n  },\n  beforeUnmount() {\n    if (this.popper && !this.visible) {\n      this.popper.destroy();\n      this.popper = null;\n    }\n\n    const popperElm = this.$refs.popper as HTMLElement;\n    if (popperElm && popperElm.parentNode === document.body) {\n      popperElm.removeEventListener('click', stop);\n      document.body.removeChild(popperElm);\n    }\n    this.offEvents.forEach((handler) => handler && handler());\n  },\n  methods: {\n    createPopper() {\n      const currentPlacement = this.placement;\n      const popperElm = this.$refs.popper as HTMLElement;\n\n      const overlayContainer = getAttach(this.attach);\n      overlayContainer.appendChild(popperElm);\n      if (this.popper && this.popper.destroy) {\n        this.popper.destroy();\n      }\n\n      let placement = placementMap[currentPlacement] as Placement;\n      if (this.expandAnimation) {\n        // 如果有展开收起动画 需要在beforeEnter阶段设置max-height为0 这导致popperjs无法知道overflow了 所以需要在这里手动判断设置placment\n        popperElm.style.display = '';\n        this.presetMaxHeight = parseInt(getComputedStyle(this.getContentElm(popperElm)).maxHeight, 10) || Infinity;\n        const referenceElmBottom = innerHeight - this.referenceElm.getBoundingClientRect().bottom;\n        const referenceElmTop = this.referenceElm.getBoundingClientRect().top;\n        if (referenceElmBottom < popperElm.scrollHeight && referenceElmTop >= popperElm.scrollHeight) {\n          placement = /left/.test(currentPlacement) ? 'top-start' : 'top-end';\n        }\n        popperElm.style.display = 'none';\n      }\n\n      this.popper = createPopper(this.referenceElm, popperElm, {\n        placement,\n        onFirstUpdate: () => {\n          this.$nextTick(this.updatePopper);\n        },\n      });\n      popperElm.addEventListener('click', stop);\n      // 监听trigger元素尺寸变化\n      this.resizeSensor = new ResizeSensor(this.referenceElm, () => {\n        this.popper && this.popper.update();\n        this.updateOverlayStyle();\n      });\n    },\n\n    updatePopper() {\n      if (this.popper) {\n        this.popper.update();\n      } else {\n        this.createPopper();\n      }\n    },\n\n    updateOverlayStyle() {\n      const { overlayStyle } = this;\n      const referenceElm = this.$el as HTMLElement;\n      if (!this.$refs) return;\n      const refOverlayElm = this.$refs.overlay as HTMLElement;\n      if (typeof overlayStyle === 'function' && referenceElm && refOverlayElm) {\n        const userOverlayStyle = overlayStyle(referenceElm);\n        this.setOverlayStyle(userOverlayStyle);\n      } else if (typeof overlayStyle === 'object' && refOverlayElm) {\n        this.setOverlayStyle(overlayStyle);\n      }\n    },\n\n    setOverlayStyle(styles: Styles) {\n      const refOverlayElm = this.$refs.overlay as HTMLElement;\n      if (typeof styles === 'object' && refOverlayElm) {\n        setStyle(refOverlayElm, styles);\n      }\n    },\n\n    destroyPopper(el: HTMLElement) {\n      this.resetExpandStyles(el);\n      if (this.popper) {\n        this.popper.destroy();\n        this.popper = null;\n        if (this.destroyOnClose) {\n          const popperElm = this.$refs.popper as HTMLElement;\n          popperElm.parentNode.removeChild(popperElm);\n        }\n      }\n    },\n\n    handleToggle(context: PopupVisibleChangeContext) {\n      this.emitPopVisible(!this.visible, context);\n    },\n\n    handleOpen(context: Pick<PopupVisibleChangeContext, 'trigger'>, openParent?: boolean) {\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(\n        () => {\n          this.emitPopVisible(true, context);\n        },\n        this.clickTrigger ? 0 : showTimeout,\n      );\n      // keep parent open (recursively)\n      if (openParent) {\n        (this as any).popup?.handleOpen(context, true);\n      }\n    },\n    handleClose(context: Pick<PopupVisibleChangeContext, 'trigger'>, closeParent?: boolean) {\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(\n        () => {\n          this.emitPopVisible(false, context);\n        },\n        this.clickTrigger ? 0 : hideTimeout,\n      );\n      // close parent (recursively)\n      if (closeParent) {\n        (this as any).popup?.handleClose({ trigger: 'trigger-element-hover' }, true);\n      }\n    },\n    handleDocumentClick(e: Event) {\n      const popperElm = this.$refs.popper as HTMLElement;\n      if (!this.$el || this.$el.contains(e.target as Element) || !popperElm || popperElm.contains(e.target as Node))\n        return;\n      this.emitPopVisible(false, { trigger: 'document' });\n    },\n    emitPopVisible(val: boolean, context: PopupVisibleChangeContext) {\n      this.$nextTick(() => {\n        emitEvent(this, 'visible-change', val, context);\n      });\n    },\n    // 以下代码用于处理展开-收起动画相关,\n    // 需要使用popup的组件设置非对外暴露的expandAnimation开启 对不需要展开收起动画的其他组件无影响\n    getContentElm(el: HTMLElement): HTMLElement {\n      if (this.expandAnimation) {\n        const content = el.querySelector(`.${name}__content`) as HTMLElement;\n        return content;\n      }\n      return null;\n    },\n    // 动画结束后 清除展开收起动画相关属性 避免造成不必要的影响\n    resetExpandStyles(el: HTMLElement) {\n      const content = this.getContentElm(el);\n      if (content) {\n        content.style.overflow = '';\n        if (this.presetMaxHeight !== Infinity) {\n          content.style.maxHeight = '';\n        }\n      }\n    },\n    // 设置展开动画初始条件\n    beforeEnter(el: HTMLElement) {\n      const content = this.getContentElm(el);\n      if (content) {\n        content.style.overflow = 'hidden';\n        content.style.maxHeight = '0';\n      }\n    },\n    // 设置max-height,触发展开动画\n    enter(el: HTMLElement) {\n      const content = this.getContentElm(el);\n      if (content) {\n        // 对比scrollHeight和组件自身设置的maxHeight 选择小的做展开动画\n        const scrollHeight = Math.min(content.scrollHeight, this.presetMaxHeight);\n        content.style.maxHeight = `${scrollHeight}px`;\n      }\n    },\n    // 设置max-height为0,触发收起动画\n    leave(el: HTMLElement) {\n      const content = this.getContentElm(el);\n      if (content) content.style.maxHeight = '0';\n    },\n    // 设置收起动画初始条件\n    beforeLeave(el: HTMLElement) {\n      const content = this.getContentElm(el);\n      if (content) {\n        content.style.overflow = 'hidden';\n      }\n    },\n  },\n\n  render() {\n    return (\n      <div class={`${name}__reference`}>\n        <transition\n          name={`${name}--animation`}\n          appear\n          onBeforeEnter={this.beforeEnter}\n          onEnter={this.enter}\n          onAfterEnter={this.resetExpandStyles}\n          onBeforeLeave={this.beforeLeave}\n          onLeave={this.leave}\n          onAfterLeave={this.destroyPopper}\n        >\n          <div\n            class={name}\n            ref=\"popper\"\n            v-show={!this.disabled && this.visible}\n            role=\"tooltip\"\n            aria-hidden={this.disabled || !this.visible ? 'true' : 'false'}\n            style={{ zIndex: this.zIndex }}\n          >\n            <div class={this.overlayClasses} ref=\"overlay\">\n              {renderTNodeJSX(this, 'content')}\n              {this.showArrow && <div class={`${name}__arrow`}></div>}\n            </div>\n          </div>\n        </transition>\n        {renderContent(this, 'default', 'triggerElement')}\n      </div>\n    );\n  },\n});\n"],"names":["root","factory","module","window","this","globalWindow","Math","self","Function","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","setTimeout","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","timer","clearTimeout","forEachElement","elements","callback","elementsType","Object","prototype","toString","call","isCollectionTyped","jQuery","Elements","i","j","length","getElementSize","element","getBoundingClientRect","width","offsetWidth","height","offsetHeight","rect","round","setStyle","style","keys","forEach","key","ResizeSensor","lastAnimationFrameForInvisibleCheck","EventQueue","q","add","ev","push","sizeInfo","remove","newQueue","attachResizeEvent","resized","resizedAttached","resizeSensor","document","createElement","dir","className","pointerEvents","position","left","top","right","bottom","overflow","zIndex","visibility","maxWidth","styleChild","transition","expand","expandChild","appendChild","shrink","shrinkChild","computedStyle","getComputedStyle","getPropertyValue","dirty","rafId","size","lastWidth","lastHeight","initialHiddenCheck","resetExpandShrink","scrollLeft","scrollTop","reset","invisible","resetSensor","onResized","onScroll","addEvent","el","name","cb","attachEvent","addEventListener","elem","detach","contains","removeChild","MutationObserver","observer","mutations","hasOwnProperty","items","addedNodes","event","observe","body","childList","subtree","prefix","config","stop","e","stopPropagation","placementMap","showTimeout","hideTimeout","triggers","defineComponent","components","Transition","provide","popup","inject","props","expandAnimation","type","Boolean","emits","data","currentPlacement","popperElm","referenceElm","popper","timeout","refOverlayElm","hasDocumentEvent","offEvents","computed","overlayClasses","base","showArrow","CLASSNAMES","STATUS","disabled","concat","overlayClassName","hasTrigger","reduce","map","trigger","includes","watch","visible","val","updatePopper","click","on","handleDocumentClick","focus","once","code","handleClose","off","overlayStyle","update","updateOverlayStyle","mounted","content","setOverlayStyle","$el","$refs","createPopper","reference","handleToggle","hover","handleOpen","parent","closeParent","parentRect","x","y","querySelector","oncontextmenu","button","beforeUnmount","destroy","parentNode","removeEventListener","handler","methods","placement","overlayContainer","getAttach","attach","display","presetMaxHeight","parseInt","getContentElm","maxHeight","Infinity","referenceElmBottom","innerHeight","referenceElmTop","scrollHeight","test","onFirstUpdate","$nextTick","overlay","userOverlayStyle","_typeof","styles","destroyPopper","resetExpandStyles","destroyOnClose","context","emitPopVisible","openParent","clickTrigger","target","emitEvent","beforeEnter","enter","min","leave","beforeLeave","render","renderTNodeJSX","renderContent"],"mappings":"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"}
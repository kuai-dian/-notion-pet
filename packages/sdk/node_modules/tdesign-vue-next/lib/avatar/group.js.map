{"version":3,"file":"group.js","sources":["../../src/avatar/group.tsx"],"sourcesContent":["import { ComponentPublicInstance, defineComponent, provide } from 'vue';\nimport { prefix } from '../config';\nimport props from './avatar-group-props';\nimport { SlotReturnValue, TNodeReturnValue } from '../common';\nimport Avatar from './avatar';\nimport { renderContent, renderTNodeJSX } from '../utils/render-tnode';\n\nconst name = `${prefix}-avatar-group`;\n\nexport default defineComponent({\n  name: 'TAvatarGroup',\n  components: {\n    Avatar,\n  },\n  props,\n\n  setup(props) {\n    provide('avatarGroup', { ...props });\n\n    const renderIcon = (context: ComponentPublicInstance) => {\n      return isIcon(context) && typeof props.collapseAvatar !== 'string' ? props.collapseAvatar : null;\n    };\n\n    const renderEllipsisAvatar = (\n      context: ComponentPublicInstance,\n      children: Array<TNodeReturnValue>,\n    ): Array<TNodeReturnValue> => {\n      if (children?.length > props.max) {\n        const content = setEllipsisContent(context, children);\n        const outAvatar = children.slice(0, props.max);\n        outAvatar.push(\n          <Avatar size={props.size} icon={renderIcon(context)}>\n            {content}\n          </Avatar>,\n        );\n        return [outAvatar];\n      }\n      return [children];\n    };\n\n    const setEllipsisContent = (context: ComponentPublicInstance, children: Array<TNodeReturnValue>) => {\n      let content = '';\n      if (props.collapseAvatar) {\n        if (!isIcon(context)) {\n          content = renderContent(context, 'collapseAvatar', 'content');\n        }\n      } else {\n        content = `+${children.length - props.max}`;\n      }\n      return content;\n    };\n\n    const isIcon = (context: ComponentPublicInstance) => {\n      const content = renderTNodeJSX(context, 'collapseAvatar');\n      return content;\n    };\n\n    return {\n      renderEllipsisAvatar,\n      isIcon,\n      setEllipsisContent,\n    };\n  },\n  render() {\n    const children: TNodeReturnValue = renderTNodeJSX(this, 'default');\n    const { cascading, max } = this.$props;\n    const groupClass = [\n      `${name}`,\n      {\n        [`${prefix}-avatar--offset-right`]: cascading === 'right-up',\n        [`${prefix}-avatar--offset-left`]: cascading === 'left-up',\n      },\n    ];\n    let content = [children];\n\n    if (max && max >= 0) {\n      content = [this.renderEllipsisAvatar(this, children as SlotReturnValue[])];\n    }\n    return <div class={groupClass}>{content}</div>;\n  },\n});\n"],"names":["name","prefix","defineComponent","components","Avatar","props","setup","props2","provide","renderIcon","context","isIcon","collapseAvatar","renderEllipsisAvatar","children","length","max","content","setEllipsisContent","outAvatar","slice","push","size","renderContent","renderTNodeJSX","render","$props","cascading","groupClass"],"mappings":"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"}
{"version":3,"file":"circle-adapter.js","sources":["../../../../src/_common/js/loading/circle-adapter.ts"],"sourcesContent":["import setStyle from '../utils/set-style';\nimport { getIEVersion } from '../utils/helper';\n\nexport default function circleAdapter(circleElem: HTMLElement) {\n  let basicStyle = {};\n\n  if (!circleElem) {\n    return;\n  }\n\n  const { color, fontSize } = window?.getComputedStyle?.(circleElem);\n\n  // to fix the browser compat of foreignObject in Safari,\n  // https://bugs.webkit.org/show_bug.cgi?id=23113\n  const ua = window?.navigator?.userAgent;\n  const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\n  if (isSafari) {\n    basicStyle = {\n      transformOrigin: '-1px -1px',\n      transform: `scale(${parseInt(fontSize, 10) / 14})`,\n    };\n  }\n  // 添加：判断是否为IE浏览器\n  if (color && getIEVersion() > 11) {\n    const matched = color.match(/[\\d.]+/g);\n    const endColor = matched ? `rgba(${matched[0]}, ${matched[1]}, ${matched[2]}, 0)` : '';\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: `conic-gradient(from 90deg at 50% 50%,${endColor} 0deg, ${color} 360deg)`,\n    });\n  } else {\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: '',\n    });\n  }\n}\n"],"names":["circleAdapter","circleElem","basicStyle","window","getComputedStyle","color","fontSize","ua","navigator","userAgent","isSafari","test","transformOrigin","transform","parseInt","getIEVersion","matched","match","endColor","setStyle","background"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEe,SAASA,aAAT,CAAuBC,UAAvB,EAAmC;AAAA;;AAChD,MAAIC,UAAU,GAAG,EAAjB;;AACA,MAAI,CAACD,UAAL,EAAiB;AACf;AACD;;AACD,yCAA4BE,MAA5B,sEAA4B,QAAQC,gBAApC,2DAA4B,qCAA2BH,UAA3B,CAA5B;AAAA,MAAQI,KAAR,yBAAQA,KAAR;AAAA,MAAeC,QAAf,yBAAeA,QAAf;;AACA,MAAMC,EAAE,eAAGJ,MAAH,mEAAG,SAAQK,SAAX,uDAAG,mBAAmBC,SAA9B;AACA,MAAMC,QAAQ,GAAG,SAASC,IAAT,CAAcJ,EAAd,KAAqB,CAAC,SAASI,IAAT,CAAcJ,EAAd,CAAvC;;AACA,MAAIG,QAAJ,EAAc;AACZR,IAAAA,UAAU,GAAG;AACXU,MAAAA,eAAe,EAAE,WADN;AAEXC,MAAAA,SAAS,kBAAWC,QAAQ,CAACR,QAAD,EAAW,EAAX,CAAR,GAAyB,EAApC;AAFE,KAAb;AAID;;AACD,MAAID,KAAK,IAAIU,oCAAY,KAAK,EAA9B,EAAkC;AAChC,QAAMC,OAAO,GAAGX,KAAK,CAACY,KAAN,CAAY,SAAZ,CAAhB;AACA,QAAMC,QAAQ,GAAGF,OAAO,kBAAWA,OAAO,CAAC,CAAD,CAAlB,eAA0BA,OAAO,CAAC,CAAD,CAAjC,eAAyCA,OAAO,CAAC,CAAD,CAAhD,YAA4D,EAApF;AACAG,IAAAA,oCAAQ,CAAClB,UAAD,kCACHC,UADG;AAENkB,MAAAA,UAAU,iDAA0CF,QAA1C,oBAA4Db,KAA5D;AAFJ,OAAR;AAID,GAPD,MAOO;AACLc,IAAAA,oCAAQ,CAAClB,UAAD,kCACHC,UADG;AAENkB,MAAAA,UAAU,EAAE;AAFN,OAAR;AAID;AACF;;;;"}
{"version":3,"file":"dom.js","sources":["../../node_modules/performance-now/lib/performance-now.js","../../node_modules/raf/index.js","../../src/utils/dom.ts"],"sourcesContent":["// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","/**\n * Thanks to https://spothero.com/static/main/uniform/docs-js/module-DOMUtils.html\n */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-undef */\nimport { ComponentPublicInstance, VNode } from 'vue';\nimport raf from 'raf';\nimport isString from 'lodash/isString';\nimport { easeInOutCubic, EasingFunction } from './easing';\nimport { ScrollContainer, ScrollContainerElement } from '../common';\n\nconst isServer = typeof window === 'undefined';\nconst trim = (str: string): string => (str || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '');\n\nexport const on = ((): any => {\n  if (!isServer && document.addEventListener) {\n    return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false);\n      }\n    };\n  }\n  return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n    if (element && event && handler) {\n      (element as any).attachEvent(`on${event}`, handler);\n    }\n  };\n})();\n\nexport const off = ((): any => {\n  if (!isServer && document.removeEventListener) {\n    return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n      if (element && event) {\n        element.removeEventListener(event, handler, false);\n      }\n    };\n  }\n  return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n    if (element && event) {\n      (element as any).detachEvent(`on${event}`, handler);\n    }\n  };\n})();\n\nexport function once(element: Node, event: string, handler: EventListenerOrEventListenerObject) {\n  const handlerFn = typeof handler === 'function' ? handler : handler.handleEvent;\n  const callback = (evt: any) => {\n    handlerFn(evt);\n    off(element, event, callback);\n  };\n\n  on(element, event, callback);\n}\n\nexport function hasClass(el: Element, cls: string): any {\n  if (!el || !cls) return false;\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.');\n  if (el.classList) {\n    return el.classList.contains(cls);\n  }\n  return ` ${el.className} `.indexOf(` ${cls} `) > -1;\n}\n\nexport function addClass(el: Element, cls: string): any {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || '').split(' ');\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += ` ${clsName}`;\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass;\n  }\n}\n\nexport function removeClass(el: Element, cls: string): any {\n  if (!el || !cls) return;\n  const classes = cls.split(' ');\n  let curClass = ` ${el.className} `;\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(` ${clsName} `, ' ');\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass);\n  }\n}\n\nexport const getAttach = (node: any): HTMLElement => {\n  const attachNode = typeof node === 'function' ? node() : node;\n  if (!attachNode) {\n    return document.body;\n  }\n  if (isString(attachNode)) {\n    return document.querySelector(attachNode);\n  }\n  if (attachNode instanceof HTMLElement) {\n    return attachNode;\n  }\n  return document.body;\n};\n\n/**\n * 获取滚动容器\n * 因为document不存在scroll等属性, 因此排除document\n * window | HTMLElement\n * @param {ScrollContainerElement} [container='body']\n * @returns {ScrollContainer}\n */\nexport const getScrollContainer = (container: ScrollContainer = 'body'): ScrollContainerElement => {\n  if (isString(container)) {\n    return document.querySelector(container) as HTMLElement;\n  }\n  if (typeof container === 'function') {\n    return container();\n  }\n  return container;\n};\n\n/**\n * 返回是否window对象\n *\n * @export\n * @param {any} obj\n * @returns\n */\nfunction isWindow(obj: any) {\n  return obj && obj === obj.window;\n}\n\ntype ScrollTarget = HTMLElement | Window | Document;\n\n/**\n * 获取滚动距离\n *\n * @export\n * @param {ScrollTarget} target\n * @param {boolean} isLeft true为获取scrollLeft, false为获取scrollTop\n * @returns {number}\n */\nexport function getScroll(target: ScrollTarget, isLeft?: boolean): number {\n  // node环境或者target为空\n  if (typeof window === 'undefined' || !target) {\n    return 0;\n  }\n  const method = isLeft ? 'scrollLeft' : 'scrollTop';\n  let result = 0;\n  if (isWindow(target)) {\n    result = (target as Window)[isLeft ? 'pageXOffset' : 'pageYOffset'];\n  } else if (target instanceof Document) {\n    result = target.documentElement[method];\n  } else if (target) {\n    result = (target as HTMLElement)[method];\n  }\n  return result;\n}\ninterface ScrollTopOptions {\n  container?: ScrollTarget;\n  duration?: number;\n  easing?: EasingFunction;\n}\n\ndeclare type ScrollToResult<T = any> = T | { default: T };\n\nexport function scrollTo(target: number, opt: ScrollTopOptions): Promise<ScrollToResult> {\n  const { container = window, duration = 450, easing = easeInOutCubic } = opt;\n  const scrollTop = getScroll(container);\n  const startTime = Date.now();\n  return new Promise((res) => {\n    const fnc = () => {\n      const timestamp = Date.now();\n      const time = timestamp - startTime;\n      const nextScrollTop = easing(Math.min(time, duration), scrollTop, target, duration);\n      if (isWindow(container)) {\n        (container as Window).scrollTo(window.pageXOffset, nextScrollTop);\n      } else if (container instanceof HTMLDocument || container.constructor.name === 'HTMLDocument') {\n        (container as HTMLDocument).documentElement.scrollTop = nextScrollTop;\n      } else {\n        (container as HTMLElement).scrollTop = nextScrollTop;\n      }\n      if (time < duration) {\n        raf(fnc);\n      } else {\n        // 由于上面步骤设置了scrollTop, 滚动事件可能未触发完毕\n        // 此时应该在下一帧再执行res\n        raf(res);\n      }\n    };\n    raf(fnc);\n  });\n}\n\nfunction containerDom(parent: VNode | Element | Iterable<any> | ArrayLike<any>, child: any): boolean {\n  if (parent && child) {\n    let pNode = child;\n    while (pNode) {\n      if (parent === pNode) {\n        return true;\n      }\n      const { parentNode } = pNode;\n      pNode = parentNode;\n    }\n  }\n  return false;\n}\nexport const clickOut = (els: VNode | Element | Iterable<any> | ArrayLike<any>, cb: () => void): void => {\n  on(document, 'click', (event: { target: Element }) => {\n    if (Array.isArray(els)) {\n      const isFlag = Array.from(els).every((item) => containerDom(item, event.target) === false);\n      return isFlag && cb && cb();\n    }\n    if (containerDom(els, event.target)) {\n      return false;\n    }\n    return cb && cb();\n  });\n};\n\n// 用于判断节点内容是否溢出\nexport const isNodeOverflow = (\n  ele: ComponentPublicInstance | Element | ComponentPublicInstance[] | Element[],\n): boolean => {\n  const { clientWidth = 0, scrollWidth = 0 } = ele as Element & { clientWidth: number; scrollWidth: number };\n\n  if (scrollWidth > clientWidth) {\n    return true;\n  }\n  return false;\n};\n\n// 将子元素selected滚动到父元素parentEle的可视范围内\nexport const scrollSelectedIntoView = (parentEle: HTMLElement, selected: HTMLElement) => {\n  // 服务端不处理\n  if (!window) return;\n  // selected不存在或selected父元素不为parentEle则不处理\n  if (!selected || selected.offsetParent !== parentEle) {\n    parentEle.scrollTop = 0;\n    return;\n  }\n  const selectedTop = selected.offsetTop;\n  const selectedBottom = selectedTop + selected.offsetHeight;\n  const parentScrollTop = parentEle.scrollTop;\n  const parentViewBottom = parentScrollTop + parentEle.clientHeight;\n  if (selectedTop < parentScrollTop) {\n    // selected元素滚动过了，则将其向下滚动到可视范围顶部\n    parentEle.scrollTop = selectedTop;\n  } else if (selectedBottom > parentViewBottom) {\n    // selected元素未滚动到，则将其向上滚动到可视范围底部\n    parentEle.scrollTop = selectedBottom - parentEle.clientHeight;\n  }\n};\n"],"names":["now","require$$0","root","window","global","vendors","suffix","raf","caf","i","length","last","id","queue","frameDuration","callback","_now","next","Math","max","setTimeout","cp","slice","cancelled","e","round","push","handle","rafModule","fn","call","apply","arguments","object","requestAnimationFrame","cancelAnimationFrame","isServer","trim","str","replace","on","document","addEventListener","element","event","handler","attachEvent","off","removeEventListener","detachEvent","once","handlerFn","handleEvent","evt","hasClass","el","cls","indexOf","Error","classList","contains","className","addClass","curClass","classes","split","j","clsName","add","removeClass","remove","getAttach","node","attachNode","body","isString","querySelector","HTMLElement","getScrollContainer","container","isWindow","obj","getScroll","target","isLeft","method","result","Document","documentElement","scrollTo","opt","duration","easing","easeInOutCubic","scrollTop","startTime","Date","Promise","res","fnc","timestamp","time","nextScrollTop","min","pageXOffset","HTMLDocument","constructor","name","containerDom","parent","child","pNode","parentNode","clickOut","els","cb","Array","isArray","isFlag","from","every","item","isNodeOverflow","ele","clientWidth","scrollWidth","scrollSelectedIntoView","parentEle","selected","offsetParent","selectedTop","offsetTop","selectedBottom","offsetHeight","parentScrollTop","parentViewBottom","clientHeight"],"mappings":"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"}
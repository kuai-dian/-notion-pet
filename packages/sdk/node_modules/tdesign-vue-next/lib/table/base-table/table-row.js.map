{"version":3,"file":"table-row.js","sources":["../../../src/table/base-table/table-row.tsx"],"sourcesContent":["import { VNode, PropType, defineComponent, h, ref, onMounted, onBeforeUnmount, inject, Ref } from 'vue';\nimport get from 'lodash/get';\nimport cell from '@src/date-picker/basic/cell';\nimport { prefix } from '../../config';\nimport { RowspanColspan, TdBaseTableProps } from '../type';\nimport baseTableProps from '../base-table-props';\nimport TableCell from './table-cell';\nimport { CustomData, CellData, CellParams } from '../util/interface';\nimport { getPropsApiByEvent } from '../../utils/helper';\nimport { emitEvent } from '../../utils/event';\n\ntype CreateElement = ReturnType<typeof h>;\ntype Attrs = Record<string, any>;\n\nconst eventsName = {\n  mouseover: 'row-hover',\n  mouseleave: 'row-mouseleave',\n  mouseenter: 'row-mouseenter',\n  mousedown: 'row-mousedown',\n  mouseup: 'row-mouseup',\n  click: 'row-click',\n  dblclick: 'row-db-click',\n  dragstart: 'row-dragstart',\n  dragover: 'row-dragover',\n};\n\nconst observe = (element: HTMLElement, root: HTMLElement, callback: Function, marginBottom: number) => {\n  try {\n    const io = new window.IntersectionObserver(\n      (entries) => {\n        const entry = entries[0];\n        if (entry.isIntersecting) {\n          callback();\n          io.unobserve(element);\n        }\n      },\n      {\n        rootMargin: `0px 0px ${marginBottom}px 0px`,\n        root,\n      },\n    );\n    io.observe(element);\n    return io;\n  } catch (e) {\n    console.error(e);\n    callback();\n  }\n};\n\nconst requestAnimationFrame = window.requestAnimationFrame || ((cb) => setTimeout(cb, 1000 / 60));\nconst TableRowProps = {\n  rowClass: baseTableProps.rowClassName,\n  columns: baseTableProps.columns,\n  rowKey: baseTableProps.rowKey,\n  rowspanAndColspanProps: {\n    type: Object as PropType<RowspanColspan>,\n    required: false,\n    default() {\n      return {};\n    },\n  },\n  rowData: {\n    type: Object,\n    default(): any {\n      return {};\n    },\n  },\n  index: {\n    type: Number as PropType<number>,\n    default: -1,\n  },\n  current: {\n    type: Number as PropType<number>,\n    default: 1,\n  },\n  scrollType: {\n    type: String as PropType<string>,\n    default: '',\n  },\n  rowHeight: {\n    type: Number as PropType<number>,\n    default: 0,\n  },\n  bufferSize: {\n    type: Number as PropType<number>,\n    default: 0,\n  },\n  trs: {\n    type: Map,\n    default: () => new Map(),\n  },\n  row: {\n    type: Object as PropType<object>,\n    default: () => ({}),\n  },\n  provider: {\n    type: Object,\n    default() {\n      return {\n        sortOnRowDraggable: false,\n      };\n    },\n  },\n};\n\nexport default defineComponent({\n  name: `${prefix}-table-row`,\n  components: {\n    TableCell,\n  },\n  props: TableRowProps,\n  emits: ['rowMounted', 'getRowHeight', ...Object.keys(eventsName).map((key) => eventsName[key])],\n  setup(props, { emit }) {\n    const tr = ref(null);\n    const isInit = ref(props.index === 0);\n    const init = () => {\n      !isInit.value &&\n        requestAnimationFrame(() => {\n          isInit.value = true;\n        });\n    };\n    onMounted(() => {\n      const { trs, row, scrollType, index, rowHeight, bufferSize } = props;\n      if (scrollType === 'virtual') {\n        const { $index }: { $index?: number } = row;\n        trs.set($index, tr.value);\n        emit('rowMounted');\n        onBeforeUnmount(() => {\n          trs.delete($index);\n        });\n      } else if (scrollType === 'lazy') {\n        const scrollBody: Ref = inject('scrollBody');\n        if (rowHeight === 0) {\n          const rowHeightRef: Ref = inject('rowHeightRef');\n          if (index === 0) {\n            // 获取第一行高度\n            const { offsetHeight } = tr.value;\n            rowHeightRef.value = offsetHeight;\n          } else {\n            const height = rowHeightRef.value;\n            observe(tr.value, scrollBody.value, init, height * bufferSize);\n          }\n        } else {\n          observe(tr.value, scrollBody.value, init, rowHeight * bufferSize);\n        }\n      }\n    });\n    return {\n      tr,\n      isInit,\n    };\n  },\n  methods: {\n    // 渲染行\n    renderRow(): Array<VNode> {\n      const { rowData, columns, index: rowIndex, rowspanAndColspanProps, scrollType, isInit } = this;\n      const hasHolder = scrollType === 'lazy' && !isInit;\n      if (hasHolder) {\n        const rowHeightRef: Ref = inject('rowHeightRef');\n        return [<td style={{ height: `${rowHeightRef.value}px`, border: 'none' }} />];\n      }\n      const rowBody: Array<VNode> = [];\n      let flag = true;\n      columns.forEach((column, index) => {\n        const customData: CustomData = {\n          type: 'cell',\n          func: 'cell',\n        };\n        const { render, cell } = column;\n        const { colKey } = column;\n\n        let customRender: any;\n\n        if (typeof cell === 'function') {\n          customRender = cell;\n        } else if (typeof cell === 'string' && typeof this.$slots[cell] === 'function') {\n          customRender = (h: CreateElement, params: CellParams) => this.$slots[cell](params);\n        } else if (typeof this.$slots?.[colKey] === 'function') {\n          customRender = (h: CreateElement, params: CellParams) => this.$slots[colKey](params);\n        } else if (typeof render === 'function') {\n          customRender = render;\n          customData.func = 'render';\n        } else {\n          customRender = () => get(rowData, colKey);\n        }\n\n        const attrs: Attrs = column.attrs || {};\n        if (colKey !== 'expanded-row' && rowspanAndColspanProps?.[colKey]) {\n          let colspan = 1;\n          let rowspan = 1;\n          if (rowspanAndColspanProps[colKey]) {\n            rowspan = rowspanAndColspanProps[colKey].rowspan || rowspan;\n            colspan = rowspanAndColspanProps[colKey].colspan || colspan;\n          }\n          attrs.colspan = colspan;\n          attrs.rowspan = rowspan;\n          if (colspan === -1 || rowspan === -1) {\n            return;\n          }\n        }\n        let withBorder;\n        let withoutBorder;\n        // 存在跨列或者跨行的情况\n        if (index > rowBody.length && rowIndex > 0) {\n          // 如果当前显示行的第一列，但不是 column 的第一列而且有固定列存在的情况下，要隐藏一下 border\n          if (columns[index - 1]?.fixed && rowBody.length === 0) {\n            withoutBorder = true;\n          } else if (flag) {\n            withBorder = true;\n            flag = false;\n          }\n        }\n        const cellData: CellData = {\n          col: {\n            ...column,\n            attrs,\n          },\n          withBorder,\n          withoutBorder,\n          colIndex: index,\n          row: rowData,\n          rowIndex,\n          customData,\n          customRender,\n          type: 'td',\n        };\n\n        const listeners = {\n          onCellClick: (p: Parameters<TdBaseTableProps['onCellClick']>[0]) => {\n            emitEvent<Parameters<TdBaseTableProps['onCellClick']>>(this, 'cell-click', p);\n          },\n        };\n        rowBody.push(\n          <table-cell ref={`${rowIndex}_${index}`} {...listeners} cellData={cellData} length={columns.length} />,\n        );\n      });\n      return rowBody;\n    },\n  },\n  render() {\n    const { rowClass, $attrs, rowData, index, rowKey, current, provider } = this;\n    const params = {\n      row: rowData,\n      index,\n    };\n    const on = {};\n    Object.keys(eventsName).forEach((event) => {\n      const emitEventName = eventsName[event];\n      on[getPropsApiByEvent(event)] = (e: MouseEvent) => {\n        this.$emit(emitEventName, {\n          ...params,\n          e,\n        });\n      };\n    });\n\n    const trProps = {\n      ...$attrs,\n      class: rowClass,\n      key: rowKey ? get(rowData, rowKey) : index + current,\n      ...on,\n    };\n\n    return (\n      <tr ref=\"tr\" {...trProps} draggable={provider.sortOnRowDraggable}>\n        {this.renderRow()}\n      </tr>\n    );\n  },\n});\n"],"names":["eventsName","mouseover","mouseleave","mouseenter","mousedown","mouseup","click","dblclick","dragstart","dragover","observe","element","root","callback","marginBottom","io","window","IntersectionObserver","entries","entry","isIntersecting","unobserve","rootMargin","e","console","error","requestAnimationFrame","cb","setTimeout","TableRowProps","rowClass","baseTableProps","rowClassName","columns","rowKey","rowspanAndColspanProps","type","Object","required","rowData","index","Number","current","scrollType","String","rowHeight","bufferSize","trs","Map","row","provider","sortOnRowDraggable","defineComponent","name","prefix","components","TableCell","props","emits","keys","map","key","setup","emit","tr","ref","isInit","init","value","onMounted","$index","set","onBeforeUnmount","scrollBody","inject","rowHeightRef","offsetHeight","height","methods","renderRow","rowIndex","hasHolder","border","rowBody","flag","forEach","column","customData","func","render","cell2","cell","colKey","customRender","$slots","h2","params","get","attrs","colspan","rowspan","withBorder","withoutBorder","length","fixed","cellData","col","colIndex","listeners","onCellClick","p","emitEvent","push","$attrs","on","event","emitEventName","getPropsApiByEvent","$emit","trProps"],"mappings":"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"}
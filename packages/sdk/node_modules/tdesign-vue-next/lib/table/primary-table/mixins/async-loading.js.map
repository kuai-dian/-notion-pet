{"version":3,"file":"async-loading.js","sources":["../../../../src/table/primary-table/mixins/async-loading.tsx"],"sourcesContent":["import { defineComponent, h, VNode } from 'vue';\nimport isString from 'lodash/isString';\nimport primaryTableProps from '../../primary-table-props';\nimport Loading from '../../../loading';\nimport { prefix } from '../../../config';\nimport { STATUS_CLASSNAMES } from '../../../utils/classnames';\nimport { emitEvent } from '../../../utils/event';\nimport { TdPrimaryTableProps } from '../../type';\nimport { ClassName } from '../../../common';\nimport { renderTNodeJSX } from '../../../utils/render-tnode';\n\ntype AsyncLoadingClickParams = Parameters<TdPrimaryTableProps['onAsyncLoadingClick']>;\n\nexport const ASYNC_LOADING_ROW = 'async-loading-row';\n\nexport default defineComponent({\n  name: `${prefix}-primary-table-async-loading`,\n  props: {\n    asyncLoading: primaryTableProps.asyncLoading,\n  },\n  data() {\n    return {\n      pullDownLoading: false,\n    };\n  },\n  computed: {\n    classes(): ClassName {\n      return [\n        `${prefix}-table__async-loading`,\n        {\n          [STATUS_CLASSNAMES.loading]: this.asyncLoading === 'loading',\n          [STATUS_CLASSNAMES.loadMore]: this.asyncLoading === 'load-more',\n        },\n      ];\n    },\n  },\n  methods: {\n    onLoadClick() {\n      if (typeof this.asyncLoading !== 'string') return;\n      emitEvent<AsyncLoadingClickParams>(this, 'async-loading-click', { status: this.asyncLoading });\n    },\n    renderAsyncLoadingRow(): VNode {\n      const asyncLoadingNode = renderTNodeJSX(this, 'asyncLoading');\n      if (isString(asyncLoadingNode)) {\n        const { asyncLoading } = this;\n        const loadingText = {\n          'load-more': '点击加载更多',\n          loading: '正在加载中，请稍后',\n        }[String(asyncLoading)];\n        return (\n          <div class={this.classes} onClick={this.onLoadClick}>\n            {<Loading loading={asyncLoading === 'loading'} text={loadingText} />}\n          </div>\n        );\n      }\n      if (![null, false, undefined].includes(asyncLoadingNode)) {\n        return (\n          <div class={this.classes} onClick={this.onLoadClick}>\n            {asyncLoadingNode}\n          </div>\n        );\n      }\n      return null;\n    },\n  },\n});\n"],"names":["ASYNC_LOADING_ROW","defineComponent","name","prefix","props","asyncLoading","primaryTableProps","data","pullDownLoading","computed","classes","STATUS_CLASSNAMES","loading","loadMore","methods","onLoadClick","emitEvent","status","renderAsyncLoadingRow","asyncLoadingNode","renderTNodeJSX","isString","loadingText","String","includes"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQaA,iBAAiB,GAAG;AACjC,wBAAeC,mBAAe,CAAC;AAC7BC,EAAAA,IAAI,YAAKC,aAAL,iCADyB;AAE7BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,YAAY,EAAEC,kCAAiB,CAACD;AAD3B,GAFsB;AAK7BE,EAAAA,IAL6B,kBAKtB;AACL,WAAO;AACLC,MAAAA,eAAe,EAAE;AADZ,KAAP;AAGD,GAT4B;AAU7BC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,OADQ,qBACE;AAAA;;AACR,aAAO,WACFP,aADE,kFAGFQ,kCAAiB,CAACC,OAHhB,EAG0B,KAAKP,YAAL,KAAsB,SAHhD,6CAIFM,kCAAiB,CAACE,QAJhB,EAI2B,KAAKR,YAAL,KAAsB,WAJjD,SAAP;AAOD;AATO,GAVmB;AAqB7BS,EAAAA,OAAO,EAAE;AACPC,IAAAA,WADO,yBACO;AACZ,UAAI,OAAO,KAAKV,YAAZ,KAA6B,QAAjC,EACE;AACFW,MAAAA,qBAAS,CAAC,IAAD,EAAO,qBAAP,EAA8B;AAAEC,QAAAA,MAAM,EAAE,KAAKZ;AAAf,OAA9B,CAAT;AACD,KALM;AAMPa,IAAAA,qBANO,mCAMiB;AACtB,UAAMC,gBAAgB,GAAGC,gCAAc,CAAC,IAAD,EAAO,cAAP,CAAvC;;AACA,UAAIC,4BAAQ,CAACF,gBAAD,CAAZ,EAAgC;AAC9B,YAAQd,YAAR,GAAyB,IAAzB,CAAQA,YAAR;AACA,YAAMiB,WAAW,GAAG;AAClB,uBAAa,sCADK;AAElBV,UAAAA,OAAO,EAAE;AAFS,UAGlBW,MAAM,CAAClB,YAAD,CAHY,CAApB;AAIA;AAAA,mBAAmB,KAAKK,OAAxB;AAAA,qBAA0C,KAAKK;AAA/C;AAAA,qBAA8EV,YAAY,KAAK,SAA/F;AAAA,kBAAgHiB;AAAhH;AACD;;AACD,UAAI,CAAC,CAAC,IAAD,EAAO,KAAP,EAAc,KAAK,CAAnB,EAAsBE,QAAtB,CAA+BL,gBAA/B,CAAL,EAAuD;AACrD;AAAA,mBAAmB,KAAKT,OAAxB;AAAA,qBAA0C,KAAKK;AAA/C,YAA6DI,gBAA7D;AACD;;AACD,aAAO,IAAP;AACD;AApBM;AArBoB,CAAD,CAA9B;;;;;"}
{"version":3,"file":"date-range.js","sources":["../../../src/date-picker/panel/date-range.tsx"],"sourcesContent":["import { defineComponent, PropType } from 'vue';\nimport dayjs from 'dayjs';\nimport TDateHeader from '../basic/header';\nimport TDateTable from '../basic/table';\nimport { prefix } from '../../config';\nimport { DatePickerConfig } from '../../config-provider/config-receiver';\n\nimport { DateValue } from '../type';\n\nimport {\n  getWeeks,\n  getYears,\n  getMonths,\n  flagActive,\n  subtractMonth,\n  addMonth,\n  isSame,\n  getToday,\n  firstUpperCase,\n  setDateTime,\n} from '../../_common/js/date-picker/utils';\nimport props from '../props';\n\nconst TODAY = getToday();\nconst LEFT = 'left';\nconst RIGHT = 'right';\n\nconst name = `${prefix}-date-picker-date-range`;\nexport default defineComponent({\n  name,\n  components: {\n    TDateHeader,\n    TDateTable,\n  },\n  inheritAttrs: false,\n  props: {\n    global: {\n      type: Object as PropType<DatePickerConfig>,\n      default: () => {\n        return {} as DatePickerConfig;\n      },\n    },\n    mode: {\n      type: String,\n      default: 'date',\n      validator: (v: string) => ['year', 'month', 'date'].indexOf(v) > -1,\n    },\n    value: {\n      type: Array,\n      default: () => [TODAY, TODAY],\n    },\n    minDate: Date,\n    maxDate: Date,\n    firstDayOfWeek: props.firstDayOfWeek,\n    disableDate: props.disableDate,\n    onChange: props.onChange,\n    onPick: Function,\n  },\n  emits: ['change'],\n  data() {\n    return {\n      leftYear: null,\n      leftMonth: null,\n      rightMonth: null,\n      rightYear: null,\n      leftType: this.mode,\n      rightType: this.mode,\n      startValue: null,\n      endValue: null,\n      isFirstClick: true,\n      firstClickValue: null,\n    };\n  },\n  computed: {\n    leftData() {\n      return this.getData({\n        year: this.leftYear,\n        month: this.leftMonth,\n        type: this.leftType,\n      });\n    },\n    rightData() {\n      return this.getData({\n        year: this.rightYear,\n        month: this.rightMonth,\n        type: this.rightType,\n      });\n    },\n  },\n  watch: {\n    value: {\n      handler(value) {\n        const [startValue = TODAY, endValue = TODAY] = value;\n        this.startValue = startValue;\n        this.endValue = endValue;\n      },\n      immediate: true,\n    },\n    mode(value) {\n      this.leftType = value;\n      this.rightType = value;\n    },\n  },\n  created() {\n    this.initialPicker();\n  },\n  beforeUnmount() {\n    this.initialPicker();\n  },\n  methods: {\n    initialPicker() {\n      const data = this.getLeftAndRightDataFromValue(this.value);\n\n      this.leftYear = data.leftYear;\n      this.leftMonth = data.leftMonth;\n      this.rightYear = data.rightYear;\n      this.rightMonth = data.rightMonth;\n\n      this.leftType = this.mode;\n      this.rightType = this.mode;\n      const [startValue, endValue] = this.value;\n      this.startValue = startValue;\n      this.endValue = endValue;\n      this.isFirstClick = true;\n      this.firstClickValue = TODAY;\n    },\n    getLeftAndRightDataFromValue(value: any) {\n      const [startValue = TODAY, endValue = TODAY] = value || this.value;\n      const leftYear = startValue.getFullYear();\n      const leftMonth = startValue.getMonth();\n      let rightMonth = endValue.getMonth();\n      let rightYear = endValue.getFullYear();\n\n      if (this.mode === 'date' && isSame(startValue, endValue, 'month')) {\n        const next = addMonth(endValue, 1);\n        rightMonth = addMonth(endValue, 1).getMonth();\n        rightYear = next.getFullYear();\n      }\n\n      if (this.mode === 'month' && isSame(startValue, endValue, 'year')) {\n        rightYear = leftYear + 1;\n      }\n\n      if (this.mode === 'year' && isSame(startValue, endValue, 'year')) {\n        rightYear = leftYear + 10;\n      }\n\n      return {\n        leftYear,\n        leftMonth,\n        rightMonth,\n        rightYear,\n      };\n    },\n    getData({ year, month, type }: { year: number; month: number; type: string }) {\n      const { disableDate, minDate, maxDate, startValue, endValue, firstDayOfWeek } = this;\n      let data;\n\n      const start = startValue;\n      const end = endValue;\n\n      const options = {\n        disableDate,\n        minDate,\n        maxDate,\n        firstDayOfWeek,\n        monthLocal: this.global.months,\n      };\n\n      switch (type) {\n        case 'date':\n          data = getWeeks({ year, month }, options);\n          break;\n        case 'month':\n          data = getMonths(year, options);\n          break;\n        case 'year':\n          data = getYears(year, options);\n          break;\n        default:\n          break;\n      }\n\n      return flagActive(data, { start, end, type });\n    },\n    getClickHandler(direction: string, date: DateValue, e: MouseEvent) {\n      const type = this[`${direction}Type`];\n      return this[`click${firstUpperCase(type)}`](date, e, direction);\n    },\n    clickHeader(flag: number, direction: string) {\n      const year = this[`${direction}Year`];\n      const month = this[`${direction}Month`];\n      const type = this[`${direction}Type`];\n\n      let monthCount;\n      let next;\n      switch (type) {\n        case 'date':\n          monthCount = 1;\n          break;\n        case 'month':\n          monthCount = 12;\n          break;\n        case 'year':\n          monthCount = 120;\n      }\n\n      const current = new Date(year, month);\n\n      if (flag === 1) {\n        next = addMonth(current, monthCount);\n      } else if (flag === -1) {\n        next = subtractMonth(current, monthCount);\n      } else {\n        next = new Date();\n      }\n\n      this[`${direction}Year`] = next.getFullYear();\n      this[`${direction}Month`] = next.getMonth();\n    },\n    clickDate(date: Date, e: MouseEvent) {\n      let partial = 'start';\n      if (this.isFirstClick) {\n        this.startValue = date;\n        this.endValue = date;\n        this.isFirstClick = false;\n        this.firstClickValue = date;\n      } else {\n        if (dayjs(this.firstClickValue).isBefore(dayjs(date), 'day')) {\n          this.endValue = date;\n        } else {\n          this.endValue = this.firstClickValue;\n          this.startValue = date;\n        }\n        this.$props.onChange([setDateTime(this.startValue, 0, 0, 0), setDateTime(this.endValue, 23, 59, 59)]);\n        this.isFirstClick = true;\n        partial = 'end';\n      }\n      this.$props.onPick && this.$props.onPick(date, { e, partial });\n    },\n    clickYear(date: Date, e: MouseEvent, type: string) {\n      if (this.mode === 'year') {\n        if (this.isFirstClick) {\n          this.startValue = date;\n          this.isFirstClick = false;\n          this.firstClickValue = date;\n        } else {\n          this.$props.onChange([this.startValue, this.endValue]);\n          this.isFirstClick = true;\n        }\n      } else {\n        this[`${type}Type`] = 'month';\n        this[`${type}Year`] = date.getFullYear();\n      }\n    },\n    clickMonth(date: Date, e: MouseEvent, type: string) {\n      if (this.mode === 'month') {\n        if (this.isFirstClick) {\n          this.startValue = date;\n          this.isFirstClick = false;\n          this.firstClickValue = date;\n        } else {\n          if (this.endValue < this.startValue) {\n            this.endValue = this.startValue;\n          }\n          this.$props.onChange([this.startValue, this.endValue]);\n          this.isFirstClick = true;\n        }\n      } else {\n        this[`${type}Type`] = 'date';\n        this[`${type}Month`] = date.getMonth();\n        this[`${type}Year`] = date.getFullYear();\n      }\n    },\n    onMouseEnter(date: Date) {\n      if (this.isFirstClick) {\n        return;\n      }\n\n      if (this.firstClickValue.getTime() > date.getTime()) {\n        this.startValue = date;\n        this.endValue = this.firstClickValue;\n      } else {\n        this.startValue = this.firstClickValue;\n        this.endValue = date;\n      }\n    },\n    onTypeChange() {\n      this.startValue = this.firstClickValue;\n      this.endValue = this.firstClickValue;\n    },\n    handleTypeChange(direction: string, type: string) {\n      this[`${direction}Type`] = type;\n    },\n  },\n  render() {\n    const {\n      leftYear,\n      leftMonth,\n      leftType,\n      leftData,\n\n      rightYear,\n      rightMonth,\n      rightType,\n      rightData,\n\n      firstDayOfWeek,\n    } = this;\n    return (\n      <div class={`${prefix}-date-picker__panels`}>\n        <div class={`${prefix}-date-picker__panel`}>\n          <t-date-header\n            year={leftYear}\n            month={leftMonth}\n            type={leftType}\n            onBtnClick={(flag: number) => this.clickHeader(flag, LEFT)}\n            onTypeChange={(type: string) => this.handleTypeChange(LEFT, type)}\n          />\n\n          <t-date-table\n            type={leftType}\n            first-day-of-week={firstDayOfWeek}\n            data={leftData}\n            onCellClick={(date: DateValue, e: MouseEvent) => this.getClickHandler(LEFT, date, e)}\n            onCellMouseEnter={this.onMouseEnter}\n          />\n        </div>\n        <div class={`${prefix}-date-picker__panel`}>\n          <t-date-header\n            year={rightYear}\n            month={rightMonth}\n            type={rightType}\n            onBtnClick={(flag: number) => this.clickHeader(flag, RIGHT)}\n            onTypeChange={(type: string) => this.handleTypeChange(RIGHT, type)}\n          />\n\n          <t-date-table\n            type={rightType}\n            first-day-of-week={firstDayOfWeek}\n            data={rightData}\n            onUpdateType={this.onTypeChange}\n            onCellClick={(date: DateValue, e: MouseEvent) => this.getClickHandler(RIGHT, date, e)}\n            onCellMouseEnter={this.onMouseEnter}\n          />\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["TODAY","getToday","LEFT","RIGHT","name","prefix","defineComponent","components","TDateHeader","TDateTable","inheritAttrs","props","global","type","Object","mode","String","validator","v","indexOf","value","Array","minDate","Date","maxDate","firstDayOfWeek","disableDate","onChange","onPick","Function","emits","data","leftYear","leftMonth","rightMonth","rightYear","leftType","rightType","startValue","endValue","isFirstClick","firstClickValue","computed","leftData","getData","year","month","rightData","watch","handler","immediate","created","initialPicker","beforeUnmount","methods","getLeftAndRightDataFromValue","getFullYear","getMonth","isSame","next","addMonth","start","end","options","monthLocal","months","getWeeks","getMonths","getYears","flagActive","getClickHandler","direction","date","e","firstUpperCase","clickHeader","flag","monthCount","current","subtractMonth","clickDate","partial","dayjs","isBefore","$props","setDateTime","clickYear","clickMonth","onMouseEnter","getTime","onTypeChange","handleTypeChange","render"],"mappings":"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"}
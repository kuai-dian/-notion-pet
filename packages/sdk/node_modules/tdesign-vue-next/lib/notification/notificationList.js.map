{"version":3,"file":"notificationList.js","sources":["../../src/notification/notificationList.tsx"],"sourcesContent":["import { defineComponent } from 'vue';\nimport Notification from './notification';\nimport { TdNotificationProps, NotificationOptions } from './type';\n\nconst DEFAULT_Z_INDEX = 6000;\nconst MARGIN = 16;\n\nexport default defineComponent({\n  components: { Notification },\n  props: {\n    placement: {\n      type: String,\n      default: 'top-right',\n      validator(v: string): boolean {\n        return ['top-left', 'top-right', 'bottom-left', 'bottom-right'].indexOf(v) > -1;\n      },\n    },\n  },\n  data() {\n    return {\n      list: [],\n      zIndex: DEFAULT_Z_INDEX,\n    };\n  },\n  methods: {\n    add(options: TdNotificationProps): number {\n      this.list.push(options);\n      return this.list.length - 1;\n    },\n    remove(index: number) {\n      this.list.splice(index, 1);\n    },\n    removeAll() {\n      this.list = [];\n    },\n    notificationStyles(item: { offset: NotificationOptions['offset']; zIndex: number }) {\n      const styles = {};\n      this.placement.split('-').forEach((direction: 'left' | 'top' | 'bottom' | 'right') => {\n        let margin = MARGIN;\n        if (item.offset && item.offset[direction]) {\n          margin += item.offset[direction];\n        }\n        styles[`margin-${direction}`] = `${margin}px`;\n      });\n      styles['z-index'] = item.zIndex ? item.zIndex : this.zIndex;\n      return styles;\n    },\n    getListeners(index: number) {\n      return {\n        onClickCloseBtn: () => this.remove(index),\n        onDurationEnd: () => this.remove(index),\n      };\n    },\n    getLastChild() {\n      return this.$refs[`notification${this.list.length - 1}`];\n    },\n  },\n  render() {\n    if (!this.list.length) return;\n    return (\n      <div class={`t-notification__show--${this.placement}`} style={`z-index: ${this.zIndex}`}>\n        {this.list.map((item, index) => (\n          <Notification\n            ref={`notification${index}`}\n            key={item.id}\n            style={this.notificationStyles(item)}\n            {...item}\n            {...this.getListeners(index)}\n          />\n        ))}\n      </div>\n    );\n  },\n});\n"],"names":["DEFAULT_Z_INDEX","MARGIN","defineComponent","components","Notification","props","placement","type","String","validator","v","indexOf","data","list","zIndex","methods","add","options","push","length","remove","index","splice","removeAll","notificationStyles","item","styles","split","forEach","direction","margin","offset","getListeners","onClickCloseBtn","onDurationEnd","getLastChild","$refs","render","map","id"],"mappings":"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"}
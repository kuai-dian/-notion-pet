{"version":3,"file":"useReceiver.js","sources":["../../src/config-provider/useReceiver.tsx"],"sourcesContent":["import { computed, inject, Ref } from 'vue';\nimport defaultConfig from './zh_CN_config';\n\nexport * from './type';\n\n/**\n * receive component global config\n * @param componentName\n * @returns {t, global}\n */\nexport function useReceiver<T>(componentName: string): {\n  t: <T>(pattern: T, placement?: Record<string, string | number>) => any;\n  global: Ref<T>;\n} {\n  const global = computed(() => {\n    const globalConfig = inject('globalConfig', {});\n    const defaultConfigData = defaultConfig[componentName];\n    if (globalConfig && globalConfig[componentName]) {\n      return {\n        ...defaultConfigData,\n        ...globalConfig[componentName],\n      };\n    }\n    return defaultConfigData;\n  });\n\n  // 处理正则表达式\n  const t = function <T>(pattern: T, data?: Record<string, string | number>) {\n    if (typeof pattern === 'string') {\n      if (!data) return pattern;\n      const regular = /\\{\\s*([\\w-]+)\\s*\\}/g;\n      const translated = pattern.replace(regular, (match, key) => {\n        if (data) {\n          return String(data[key]);\n        }\n        return '';\n      });\n      return translated;\n    }\n    if (typeof pattern === 'function') {\n      return pattern(data);\n    }\n    return '';\n  };\n\n  return {\n    t,\n    global,\n  };\n}\n"],"names":["useReceiver","componentName","global","computed","globalConfig","inject","defaultConfigData","defaultConfig","t","pattern","data","regular","translated","replace","match","key","String"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGO,SAASA,WAAT,CAAqBC,aAArB,EAAoC;AACzC,MAAMC,MAAM,GAAGC,YAAQ,CAAC,YAAM;AAC5B,QAAMC,YAAY,GAAGC,UAAM,CAAC,cAAD,EAAiB,EAAjB,CAA3B;AACA,QAAMC,iBAAiB,GAAGC,sCAAa,CAACN,aAAD,CAAvC;;AACA,QAAIG,YAAY,IAAIA,YAAY,CAACH,aAAD,CAAhC,EAAiD;AAC/C,6CACKK,iBADL,GAEKF,YAAY,CAACH,aAAD,CAFjB;AAID;;AACD,WAAOK,iBAAP;AACD,GAVsB,CAAvB;;AAWA,MAAME,CAAC,GAAG,SAAJA,CAAI,CAASC,OAAT,EAAkBC,IAAlB,EAAwB;AAChC,QAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,UAAI,CAACC,IAAL,EACE,OAAOD,OAAP;AACF,UAAME,OAAO,GAAG,qBAAhB;AACA,UAAMC,UAAU,GAAGH,OAAO,CAACI,OAAR,CAAgBF,OAAhB,EAAyB,UAACG,KAAD,EAAQC,GAAR,EAAgB;AAC1D,YAAIL,IAAJ,EAAU;AACR,iBAAOM,MAAM,CAACN,IAAI,CAACK,GAAD,CAAL,CAAb;AACD;;AACD,eAAO,EAAP;AACD,OALkB,CAAnB;AAMA,aAAOH,UAAP;AACD;;AACD,QAAI,OAAOH,OAAP,KAAmB,UAAvB,EAAmC;AACjC,aAAOA,OAAO,CAACC,IAAD,CAAd;AACD;;AACD,WAAO,EAAP;AACD,GAjBD;;AAkBA,SAAO;AACLF,IAAAA,CAAC,EAADA,CADK;AAELN,IAAAA,MAAM,EAANA;AAFK,GAAP;AAID;;;;"}